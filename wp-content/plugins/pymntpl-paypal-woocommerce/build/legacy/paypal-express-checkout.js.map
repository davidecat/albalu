{"version":3,"file":"paypal-express-checkout.js","mappings":"mBACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,YCL9D,MAAM,EAA+BC,OAAe,O,aCApD,MAAM,EAA+BA,OAAW,GAAY,S,aCA5D,MAAM,EAA+BA,OAAW,GAAS,MCAnD,EAA+BA,OAAe,OAAS,MCAvD,EAA+BA,OAAe,O,szDCoBrB,IAEzBC,EAAW,WAEb,SAAAA,EAAAC,GAAsD,IAAzCC,EAAED,EAAFC,GAAIC,EAAOF,EAAPE,QAASC,EAAOH,EAAPG,QAAOC,EAAAJ,EAAEK,UAAAA,OAAS,IAAAD,EAAG,KAAIA,G,4FAAAE,CAAA,KAAAP,GAC/CQ,KAAKN,GAAKA,EACVM,KAAKJ,QAAUA,EACfI,KAAKC,QAAU,CAAC,EAChBD,KAAKE,cAAgB,CAAC,EACtBF,KAAKL,QAAUA,EACfK,KAAKG,UAAWC,EAAAA,EAAAA,YAAW,GAADC,OAAIX,EAAE,UAChCM,KAAKF,UAAYA,GAAwB,qBAAHO,OAAwBX,GAC9DM,KAAKM,gBAAkB,GAAHD,OAAML,KAAKN,GAAE,oBACjCM,KAAKO,kBAAoB,GAAHF,OAAML,KAAKN,GAAE,iBACvC,C,QAijBC,O,EAjjBAF,E,EAAA,EAAAf,IAAA,aAAAa,MAED,WAAa,IAAAkB,EAAA,KAETR,KAAKS,mBAAmBC,MAAK,WAEzBF,EAAKG,mBAELH,EAAKI,cACT,GACJ,GAAC,CAAAnC,IAAA,mBAAAa,MAED,WAEA,GAAC,CAAAb,IAAA,WAAAa,MAED,WACI,OAA0B,OAAnBU,KAAKa,SAChB,GAEA,CAAApC,IAAA,mBAAAa,MAGA,WAAmB,IAAAwB,EAAA,KACf,OAAO,IAAIC,SAAQ,SAACC,EAASC,IACzBC,EAAAA,EAAAA,eAAcJ,EAAKK,oBAAoBT,MAAK,SAAAU,GACxCN,EAAKM,OAASA,EACdJ,GACJ,IAAGK,OAAM,SAAAC,GACLC,QAAQC,IAAIF,GACRA,SAAAA,EAAOG,MACPX,EAAKY,aAAYC,EAAAA,EAAAA,iBAAgBL,IAErCL,GACJ,GACJ,GACJ,GAEA,CAAAxC,IAAA,mBAAAa,MAIA,WACI,OAAOsC,EAAAA,EAAAA,uBACX,GAAC,CAAAnD,IAAA,cAAAa,MAED,WACI,IAAAuC,GAAqCzB,EAAAA,EAAAA,YAAW,eAAc0B,EAAAD,EAAzDE,SAAAA,OAAQ,IAAAD,EAAG,KAAIA,EAAEE,EAAWH,EAAXG,YAItB,OAHKD,GAA2B,WAAfC,IACbD,EAAW,MAERA,CACX,GAAC,CAAAtD,IAAA,UAAAa,MAED,WAEI,OADW2C,IAAE,GAAD5B,OAAIL,KAAKF,YAAaoC,KAAK,gCAAgCC,KAAK,wBAEjE,IAGf,GAAC,CAAA1D,IAAA,UAAAa,MAED,SAAQ6C,GACJF,IAAE,GAAD5B,OAAIL,KAAKF,YAAaoC,KAAK,gCAAgCC,KAAK,sBAAuBA,EAC5F,GAAC,CAAA1D,IAAA,YAAAa,MAED,SAAUb,EAAKa,GACX,IAAM6C,EAAOnC,KAAKa,UACdsB,IACAA,EAAK1D,GAAOa,EACZU,KAAKoC,QAAQD,GAErB,GAAC,CAAA1D,IAAA,cAAAa,MAED,SAAYb,EAAKa,IACAc,EAAAA,EAAAA,YAAW,GAADC,OAAIL,KAAKN,GAAE,UAC7BjB,GAAOa,CAChB,GAAC,CAAAb,IAAA,cAAAa,MAED,SAAYb,GAA0B,IAArB4D,EAAYC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KACtBH,GAAO/B,EAAAA,EAAAA,YAAW,GAADC,OAAIL,KAAKN,GAAE,UAClC,OAAIyC,EAAKjD,eAAeT,GACb0D,EAAK1D,IAEZ4D,GACArC,KAAKyC,YAAYhE,EAAK4D,GAEnBA,EACX,GAEA,CAAA5D,IAAA,YAAAa,MAMA,SAAUb,GAA0B,IAArB4D,EAAYC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KACpBH,EAAOnC,KAAKa,UAClB,OAAIsB,EAAKjD,eAAeT,GACb0D,EAAK1D,IAER4D,GACArC,KAAK0C,UAAUjE,EAAK4D,GAGrBA,EACX,GAAC,CAAA5D,IAAA,eAAAa,MAED,WAAe,IAAAqD,EAAA,KACL7C,EAAYE,KAAK4C,qBACnB9C,IAAcmC,IAAEnC,GAAWoC,KAAK,mBAAmBK,SACnDvC,KAAK6C,iBAAiB7C,KAAK8C,cAAcC,SAAQ,SAAAC,GAC7C,IAAMC,EAASN,EAAKvB,OAAO8B,QAAQP,EAAKQ,iBAAiBH,IAEzD,GADAL,EAAK1C,QAAQ+C,GAAUC,EACnBA,EAAOG,aACP,GAAItD,aAAqBuD,SAAU,KACHC,EADGC,E,+lBAAAC,CACZ1D,GAAS,IAA5B,IAAAyD,EAAAE,MAAAH,EAAAC,EAAAG,KAAAC,MAA8B,KAAnBC,EAAIN,EAAAhE,MACX2D,EAAOY,OAAOD,EAClB,CAAC,OAAAE,GAAAP,EAAAQ,EAAAD,EAAA,SAAAP,EAAAS,GAAA,CACL,MACIf,EAAOY,OAAO/D,EAG1B,IACAE,KAAKiE,QAAUhC,IAAEnC,GACjBoE,EAAAA,aAAAA,SAAsB,sBAAuBlE,MAErD,GAAC,CAAAvB,IAAA,YAAAa,MAED,WACI,OAAOU,KAAKiE,OAChB,GAAC,CAAAxF,IAAA,iBAAAa,MAED,WAAiB,IAAA6E,EAAA,KACbxF,OAAOyF,KAAKpE,KAAKC,SAAS8C,SAAQ,SAAAtE,GAC1B0F,EAAKlE,QAAQxB,GAAY,OACzB0F,EAAKlE,QAAQxB,GAAK4F,OAE1B,GACJ,GAAC,CAAA5F,IAAA,iBAAAa,MAED,WAAiB,IAAAgF,EAAA,KACb3F,OAAOyF,KAAKpE,KAAKE,eAAe6C,SAAQ,SAAAtE,GACpC6F,EAAKpE,cAAczB,GAAK8F,SAC5B,GACJ,GAAC,CAAA9F,IAAA,gBAAAa,MAED,WAAgB,IAAAkF,EAAA,KACZ7F,OAAOyF,KAAKpE,KAAKE,eAAe6C,SAAQ,SAAAtE,GACpC+F,EAAKtE,cAAczB,GAAKgG,QAC5B,GACJ,GAAC,CAAAhG,IAAA,aAAAa,MAED,WAAa,IAAAoF,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACHC,EAAU,GACV9E,GAAwB,QAAbuE,EAAA1E,KAAKG,gBAAQ,IAAAuE,OAAA,EAAbA,EAAeO,UAAW,GAY3C,OAXiB,QAAjBN,EAAI3E,KAAKG,gBAAQ,IAAAwE,GAAiB,QAAjBC,EAAbD,EAAeO,uBAAe,IAAAN,GAA9BA,EAAgCO,SAASnF,KAAKoF,YAC9CH,EAAQI,KAAKjE,OAAOkE,QAAQC,QAE5BpF,EAASgF,SAAS,aAA4B,QAAjBN,EAAI7E,KAAKG,gBAAQ,IAAA0E,GAAmB,QAAnBC,EAAbD,EAAeW,yBAAiB,IAAAV,GAAhCA,EAAkCK,SAASnF,KAAKoF,YAC7EpF,KAAKyF,kBACLR,EAAQI,KAAKjE,OAAOkE,QAAQI,UAGhCvF,EAASgF,SAAS,SAAwB,QAAjBJ,EAAI/E,KAAKG,gBAAQ,IAAA4E,GAAsB,QAAtBC,EAAbD,EAAeY,4BAAoB,IAAAX,GAAnCA,EAAqCG,SAASnF,KAAKoF,YAChFH,EAAQI,KAAKjE,OAAOkE,QAAQM,MAEzBX,CACX,GAAC,CAAAxG,IAAA,kBAAAa,MAED,SAAgBuG,GAAM,IAAAC,EAAAC,EAClB,OAAoB,QAApBD,EAAO9F,KAAKG,gBAAQ,IAAA2F,GAAS,QAATC,EAAbD,EAAeb,eAAO,IAAAc,OAAT,EAAbA,EAAwBZ,SAASU,EAC5C,GAAC,CAAApH,IAAA,mBAAAa,MAED,SAAiBuG,EAAMG,GAAS,IAAAC,EAAAC,EACtBzH,EAAM,GAAH4B,OAAMwF,EAAI,aACnB,OAAoB,QAApBI,EAAOjG,KAAKG,gBAAQ,IAAA8F,GAAO,QAAPC,EAAbD,EAAgBxH,UAAI,IAAAyH,OAAP,EAAbA,EAAsBf,SAASa,EAC1C,GAAC,CAAAvH,IAAA,mBAAAa,MAED,SAAiB2F,GACb,IAAMkB,EAAYnG,KAAKG,SAASiG,eAAiB,GAMjD,OALAnB,EAAQoB,MAAK,SAAC/H,EAAGgI,GAGb,OAFeH,EAAUI,QAAQjI,GAClB6H,EAAUI,QAAQD,IACP,EAAI,CAClC,IACOrB,CACX,GAAC,CAAAxG,IAAA,qBAAAa,MAED,WACI,OAAO,IACX,GAAC,CAAAb,IAAA,mBAAAa,MAED,SAAiB0D,GAAQ,IAAAwD,EAAA,KACfC,EAAU,CACZC,cAAe1D,EACf2D,MAAO3G,KAAK4G,eAAe5D,GAC3B6D,OAAQ,WAAa,QAAAC,EAAAxE,UAAAC,OAATwE,EAAI,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAJF,EAAIE,GAAA3E,UAAA2E,GACZT,EAAKK,OAAMK,MAAXV,EAAI,CAAQxD,GAAM3C,OAAK0G,IACvB9E,IAAEkF,SAASC,MAAMC,eAAe,kBAAmB,CAACb,EAAMxD,GAC9D,EACAsE,QAAS,WACLd,EAAKc,QAAOJ,MAAZV,EAAIlE,WACJL,IAAEkF,SAASC,MAAMC,eAAe,mBAAoB,CAACb,EAAMxD,GAC/D,EACAuE,UAAW,SAACpF,EAAMvC,GACd4G,EAAKe,UAAUpF,EAAMvC,GACrBqC,IAAEkF,SAASC,MAAMC,eAAe,qBAAsB,CAACb,EAAMxD,GACjE,EACAwE,SAAU,SAACrF,GACPqE,EAAKiB,QAAUtF,EAAKuF,QACpBzF,IAAEkF,SAASC,MAAMC,eAAe,oBAAqB,CAACb,EAAMxD,EAAQb,GACxE,EACAwF,QAAS,SAACrG,GACFkF,EAAKoB,cACLpB,EAAK9E,YAAY8E,EAAKoB,cACtBpB,EAAKoB,aAAe,MAEpBpB,EAAK9E,YAAYJ,GAErBW,IAAEkF,SAASC,MAAMC,eAAe,mBAAoB,CAACb,EAAMxD,EAAQ1B,GACvE,EACAuG,UAAW,WACP5F,IAAEkF,SAASC,MAAMC,eAAe,qBAAsB,CAACb,EAAMxD,GACjE,GAgBJ,OAdIhD,KAAKyF,kBACLgB,EAAQqB,YAAc,SAAC3F,EAAMvC,GACzB,OAAO4G,EAAKsB,YAAY3F,EAAMvC,EAClC,EACII,KAAK+H,iBAAmB/E,IAAW5B,OAAOkE,QAAQ0C,QAClDvB,EAAQwB,iBAAmB,WACvB,OAAOzB,EAAKyB,iBAAgBf,MAArBV,EAAIlE,UACf,IAGJmE,EAAQyB,uBAAyB,WAC7B,OAAO1B,EAAK0B,uBAAsBhB,MAA3BV,EAAIlE,UACf,EAEGmE,CACX,GAAC,CAAAhI,IAAA,gBAAAa,MAED,WACI,OAAOU,KAAKmI,UAAU,iBAAiB,EAC3C,GAAC,CAAA1J,IAAA,iBAAAa,MAED,WAAiB,IAAA8I,EACb,MAAyC,UAAZ,QAAtBA,GAAAxG,EAAAA,EAAAA,+BAAsB,IAAAwG,OAAA,EAAtBA,EAAwBC,MACnC,GAAC,CAAA5J,IAAA,WAAAa,MAED,WACI,OAAOU,KAAKmI,UAAU,QAAS,EACnC,GAAC,CAAA1J,IAAA,iBAAAa,MAED,SAAe0D,GAAQ,IAAAsF,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACfnC,EAAQ,KACZ,OAAQ3D,GACJ,KAAK5B,OAAOkE,QAAQC,OAChBoB,EAAqB,QAAhB2B,EAAGtI,KAAKG,gBAAQ,IAAAmI,GAAS,QAATC,EAAbD,EAAerI,eAAO,IAAAsI,OAAT,EAAbA,EAAwBnH,OAChC,MACJ,KAAKA,OAAOkE,QAAQI,SAChBiB,EAAqB,QAAhB6B,EAAGxI,KAAKG,gBAAQ,IAAAqI,GAAS,QAATC,EAAbD,EAAevI,eAAO,IAAAwI,OAAT,EAAbA,EAAwBM,SAChC,MACJ,KAAK3H,OAAOkE,QAAQM,MAChBe,EAAKqC,EAAA,GAAoB,QAApBN,EAAO1I,KAAKG,gBAAQ,IAAAuI,GAAS,QAATC,EAAbD,EAAezI,eAAO,IAAA0I,OAAT,EAAbA,EAAwBM,OAC1BC,gBACCvC,EAAMuC,QACbvC,EAAMwC,OAAS,YAEfxC,EAAMwC,OAAS,aAEnB,MACJ,KAAK/H,OAAOkE,QAAQ0C,MAChB,IAAAoB,EAA6D,QAA7DR,EAAgD5I,KAAKG,gBAAQ,IAAAyI,GAAS,QAATC,EAAbD,EAAe3I,eAAO,IAAA4I,OAAT,EAAbA,EAAwBzH,OAAMgI,EAAvEC,MAAUD,EAAEE,MACnB3C,E,kXAD4C4C,CAAAH,EAAAI,GAOpD,OAHS,QAATV,EAAInC,SAAK,IAAAmC,GAALA,EAAOW,SACP9C,EAAM8C,OAASC,SAAS/C,EAAM8C,SAE3B9C,CACX,GAAC,CAAAlI,IAAA,YAAAa,MAED,SAAU6C,EAAMvC,GAAS,IAAA+J,EAAA,KAErB,IADAC,EAAAA,EAAAA,eAAc5J,KAAKM,gBAAiB6B,EAAKuF,QAAS,IAC9CvF,EAAK0H,aAEL,OADAD,EAAAA,EAAAA,eAAc5J,KAAKO,kBAAmB4B,EAAK0H,aAAc,IAClD7J,KAAK8J,kBAAkB3H,EAAK0H,cAAcnJ,MAAK,SAAAqJ,GAClDJ,EAAKK,mBAAmBD,EAAU5H,EACtC,IAAGd,OAAM,SAAAC,GACL,OAAOqI,EAAKjI,YAAYJ,aAAK,EAALA,EAAO2I,QACnC,IAEArK,EAAQsK,MAAMpL,MAAM4B,MAAK,SAACyJ,GACtBR,EAAKS,wBAAwBjI,EAAMgI,EACvC,IAAG9I,OAAM,SAAAC,GAAK,OAAIqI,EAAKjI,YAAYJ,EAAM,GAEjD,GAAC,CAAA7C,IAAA,0BAAAa,MAED,SAAwB6C,EAAM4H,GAC1B/J,KAAKqK,uBAAuBN,GAC5B/J,KAAKsK,qBACT,GAAC,CAAA7L,IAAA,oBAAAa,MAED,SAAkBiL,GACd,OAAOC,IAAS,CACZC,OAAQ,MACRC,KAAM,uCAAFrK,OAAyCkK,IAErD,GAAC,CAAA9L,IAAA,qBAAAa,MAED,SAAmBiL,EAAOpI,GAAM,IAAAwI,EAAAC,EAAAC,EAAAC,EAwB5B,IAvBKC,EAAAA,EAAAA,SAAQR,EAAMS,WAAWC,kBAC1BjL,KAAKkL,8BAA6BC,EAAAA,EAAAA,4BAA2BZ,EAAMS,WAAWC,kBAE9EV,SAAiB,QAAZI,EAALJ,EAAOS,kBAAU,IAAAL,GAAjBA,EAAmBS,cACdC,EAAAA,EAAAA,SAAQ,wBACTzB,EAAAA,EAAAA,eAAc,aAAcW,EAAMS,WAAWI,WAAY,YAG7Db,SAAiB,QAAZK,EAALL,EAAOS,kBAAU,IAAAJ,GAAjBA,EAAmBU,aACdD,EAAAA,EAAAA,SAAQ,uBACTzB,EAAAA,EAAAA,eAAc,YAAaW,EAAMS,WAAWM,UAAW,YAG3Df,SAAiB,QAAZM,EAALN,EAAOS,kBAAU,IAAAH,GAAjBA,EAAmBU,SACdF,EAAAA,EAAAA,SAAQ,mBACTzB,EAAAA,EAAAA,eAAc,gBAAiBW,EAAMS,WAAWO,QAGpDhB,SAAiB,QAAZO,EAALP,EAAOS,kBAAU,IAAAF,GAAjBA,EAAmBU,SACdH,EAAAA,EAAAA,SAAQ,mBACTzB,EAAAA,EAAAA,eAAc,gBAAiBW,EAAMS,WAAWQ,QAGpDxL,KAAK+H,iBAAmBwC,EAAMkB,oBACzBV,EAAAA,EAAAA,SAAQR,EAAMkB,kBAAmB,KAAAC,EAKyFC,EAJvHC,GAAUT,EAAAA,EAAAA,4BAA2BZ,EAAMkB,kBAC/CzL,KAAK6L,oBAAmBC,EAAAA,EAAAA,iBAAqD,QAAtCJ,EAACnB,EAAMkB,iBAAiBM,sBAAc,IAAAL,EAAAA,EAAI,IAAK,YACtF1L,KAAKgM,8BAA8BJ,IAC9BK,EAAAA,EAAAA,gBAAejM,KAAKkM,mBAAmB,WAAY,CAAC,QAAS,aACzDC,EAAAA,EAAAA,oBAAkBC,EAAAA,EAAAA,eAAc,yBAA2BD,EAAAA,EAAAA,oBAAkBC,EAAAA,EAAAA,eAAc,uBAC5FpM,KAAK6L,mBAAwD,QAAtCF,EAACpB,EAAMkB,iBAAiBM,sBAAc,IAAAJ,EAAAA,EAAI,GAAI,WAEzE3L,KAAKkL,6BAA6BU,GAE1C,CAER,GAAC,CAAAnN,IAAA,cAAAa,MAED,SAAY6C,EAAMvC,GACd,OAAOA,EAAQsK,MAAMmC,OAAOtF,KAChC,GAAC,CAAAtI,IAAA,yBAAAa,MAED,SAAuB6C,EAAMvC,GAA2B,IAAA0M,EAAA,KAAlBC,EAASjK,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KAC9C,OAAOkI,IAAS,CACZC,OAAQ,OACR+B,KAAKC,EAAAA,EAAAA,aAAY,uCACjBtK,KAAI6G,EAAA,CACA0D,eAAgB1M,KAAKN,GACrBC,QAASK,KAAKoF,WACXmH,KAER7L,MAAK,SAAA6J,GACJ,OAAOA,CACX,IAAGlJ,OAAM,SAAAC,GACLgL,EAAK1E,aAAetG,CACxB,GACJ,GAAC,CAAA7C,IAAA,mBAAAa,MAED,SAAiB6C,EAAMvC,GAAyB,IAAA+M,EAAhBJ,EAASjK,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACnCsJ,GAAUT,EAAAA,EAAAA,6BAA2BhJ,aAAI,EAAJA,EAAMsJ,mBAAoB,CAAC,GAAG,GACnEmB,GAAkBzK,SAA8B,QAA1BwK,EAAJxK,EAAM0K,gCAAwB,IAAAF,OAA1B,EAAJA,EAAgCjN,KAAM,GAC9D,OAAO8K,IAAS,CACZC,OAAQ,OACR+B,KAAKM,EAAAA,EAAAA,cAAa,iBAClB3K,KAAI6G,EAAA,CACA+D,SAAU5K,EAAKuF,QACfkE,QAAAA,EACAgB,gBAAAA,EACAF,eAAgB1M,KAAKN,IAClB6M,KAER7L,MAAK,SAAAqJ,GACJ,OAAIA,EAAStI,KACF7B,EAAQqB,SAERrB,EAAQoB,SAEvB,IAAGK,OAAM,SAAAC,GACL,OAAO1B,EAAQqB,QACnB,GACJ,GAAC,CAAAxC,IAAA,cAAAa,MAED,SAAYgC,GAEZ,GAAC,CAAA7C,IAAA,oBAAAa,MAED,WACI,MAAO,UACX,GAAC,CAAAb,IAAA,iBAAAa,MAED,SAAeuG,GACX,MAAO,CACHmH,WAAWZ,EAAAA,EAAAA,eAAc,YAAavG,GACtCoH,WAAWb,EAAAA,EAAAA,eAAc,YAAavG,GACtCqH,OAAOd,EAAAA,EAAAA,eAAc,QAASvG,GAC9BsH,MAAMf,EAAAA,EAAAA,eAAc,OAAQvG,GAC5BuH,UAAUhB,EAAAA,EAAAA,eAAc,WAAYvG,GACpCwH,SAASjB,EAAAA,EAAAA,eAAc,UAAWvG,GAE1C,GAAC,CAAApH,IAAA,qBAAAa,MAED,SAAmBuG,GACf,MAAO,CACHuF,YAAYgB,EAAAA,EAAAA,eAAc,aAAcvG,GACxCyF,WAAWc,EAAAA,EAAAA,eAAc,YAAavG,GACtCmH,WAAWZ,EAAAA,EAAAA,eAAc,YAAavG,GACtCoH,WAAWb,EAAAA,EAAAA,eAAc,YAAavG,GACtCqH,OAAOd,EAAAA,EAAAA,eAAc,QAASvG,GAC9BsH,MAAMf,EAAAA,EAAAA,eAAc,OAAQvG,GAC5BuH,UAAUhB,EAAAA,EAAAA,eAAc,WAAYvG,GACpCwH,SAASjB,EAAAA,EAAAA,eAAc,UAAWvG,GAE1C,GAAC,CAAApH,IAAA,SAAAa,MAED,SAAO0D,EAAQb,EAAMvC,GACjBI,KAAKE,cAAc8C,GAAUpD,CACjC,GAAC,CAAAnB,IAAA,UAAAa,MAED,SAAQ6C,EAAMvC,GAEd,GAAC,CAAAnB,IAAA,SAAAa,MAED,SAAOgO,GACH,OAAOtN,KAAKoF,YAAckI,CAC9B,GAAC,CAAA7O,IAAA,UAAAa,MAED,WAAU,IAAAiO,EACFD,EAAgC,QAA5BC,GAAGnN,EAAAA,EAAAA,YAAW,sBAAc,IAAAmN,OAAA,EAAzBA,EAA2BD,KAItC,MAHY,QAARA,GAAkBrL,IAAEkF,SAASC,MAAMoG,GAAG,2BACtCF,EAAO,YAEJA,CACX,GAAC,CAAA7O,IAAA,gCAAAa,MAED,SAA8BsM,GAC1B,IAAK,IAAInN,KAAOmN,GACZhC,EAAAA,EAAAA,eAAcnL,EAAKmN,EAAQnN,GAAM,WAEzC,GAAC,CAAAA,IAAA,+BAAAa,MAED,SAA6BsM,GACzB,IAAK,IAAInN,KAAOmN,GACZhC,EAAAA,EAAAA,eAAcnL,EAAKmN,EAAQnN,GAAM,UAEzC,GAAC,CAAAA,IAAA,qBAAAa,MAED,SAAmBmO,GAAmB,IAC9BrC,EAAYE,EADKoC,EAAMpL,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,GAE9B,GAAI0E,MAAM2G,QAAQF,GAAO,KAAAG,EAAAC,EACKJ,EAAI,GAA7BrC,EAAUwC,EAAA,GAAEtC,EAASsC,EAAA,EAC1B,MACkBxC,EAAkCqC,EAA9CK,WAAiCxC,EAAamC,EAAtBM,SAE9BnE,EAAAA,EAAAA,eAAc,aAAcwB,EAAYsC,IACxC9D,EAAAA,EAAAA,eAAc,YAAa0B,EAAWoC,EAC1C,GAAC,CAAAjP,IAAA,yBAAAa,MAED,SAAuByK,GAAU,IAAAiE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAC7B,KAAKxD,EAAAA,EAAAA,SAAQhB,SAAe,QAAPiE,EAARjE,EAAUyE,aAAK,IAAAR,OAAP,EAARA,EAAiBpC,SAAU,CACpC,IAAIA,GAAUT,EAAAA,EAAAA,4BAA2BpB,EAASyE,MAAM5C,SACxD5L,KAAKkL,6BAA6BU,EACtC,CAWA,GAVI7B,SAAe,QAAPkE,EAARlE,EAAUyE,aAAK,IAAAP,GAAfA,EAAiBR,MACjBzN,KAAK6L,mBAAmB9B,EAASyE,MAAMf,KAAM,WAE7C1D,SAAe,QAAPmE,EAARnE,EAAUyE,aAAK,IAAAN,GAAfA,EAAiBO,gBACjB7E,EAAAA,EAAAA,eAAc,gBAAiBG,EAASyE,MAAMC,eAE9C1E,SAAe,QAAPoE,EAARpE,EAAUyE,aAAK,IAAAL,GAAO,QAAPC,EAAfD,EAAiB3C,aAAK,IAAA4C,GAAc,QAAdC,EAAtBD,EAAwBM,oBAAY,IAAAL,GAApCA,EAAsCM,mBACtC/E,EAAAA,EAAAA,eAAc,gBAAiBG,EAASyE,MAAMhD,MAAMkD,aAAaC,kBACjE/E,EAAAA,EAAAA,eAAc,iBAAkBG,EAASyE,MAAMhD,MAAMkD,aAAaC,kBAElE3O,KAAK+H,iBAAL/H,MAAwB+J,GAAwB,QAAhBuE,EAARvE,EAAU6E,sBAAc,IAAAN,GAAK,QAALC,EAAxBD,EAA2B,UAAE,IAAAC,GAA7BA,EAA+BM,SAAU,KAAAC,EAAAC,EAC3DnD,GAAUT,EAAAA,EAAAA,4BAA2BpB,EAAS6E,eAAe,GAAGC,SAASjD,SAE/E,GADA5L,KAAKgM,8BAA8BJ,GACI,QAAvCkD,EAAI/E,EAAS6E,eAAe,GAAGC,gBAAQ,IAAAC,GAAM,QAANC,EAAnCD,EAAqCrB,YAAI,IAAAsB,GAAzCA,EAA2CC,UAAW,CACtD,IAAMvB,GAAO3B,EAAAA,EAAAA,iBAAgB/B,EAAS6E,eAAe,GAAGC,SAASpB,KAAKuB,WACtEhP,KAAK6L,mBAAmB4B,EAAM,WAClC,EAEKxB,EAAAA,EAAAA,gBAAejM,KAAKkM,mBAAmB,WAAY,CAAC,QAAS,WAC9DlM,KAAKkL,6BAA6BU,EAE1C,CACJ,GAAC,CAAAnN,IAAA,sBAAAa,MAED,WAAsB,IAAA2P,EAAA,KAElB,OADAjP,KAAKkP,iBACE1E,IAAS,CACZC,OAAQ,OACR+B,KAAKM,EAAAA,EAAAA,cAAa,iBAClB3K,KAAMnC,KAAKmP,wBACZzO,MAAK,SAAAqJ,GACJ,GAAIA,EAASqF,QAAU,WAAarF,EAASqF,OACzC7P,OAAO8P,SAAWtF,EAASuF,cAE3B,GAAIvF,EAASwF,SACT,OAAON,EAAKvN,YAAYqI,EAASwF,SAG7C,IAAGlO,OAAM,SAAAC,GACDA,EAAMG,MACNwN,EAAKvN,YAAYJ,EAAM2I,QAE/B,GACJ,GAAC,CAAAxL,IAAA,sBAAAa,MAED,WACI,OAAA0J,EAAA,CAAQ0D,eAAgB1M,KAAKN,GAAIC,QAASK,KAAKoF,YAAcoK,EAAAA,EAAAA,gBACjE,GAAC,CAAA/Q,IAAA,wBAAAa,MAED,WACI,MAAO,MACX,GAAC,CAAAb,IAAA,iBAAAa,MAED,WAAiB,IAAAmQ,EACkB,QAA/BA,EAAAxN,IAAEjC,KAAK0P,gCAAwB,IAAAD,GAA/BA,EAAiCE,MAAM,CACnC1F,QAASjK,KAAK4P,uBACdC,WAAY,CACRC,WAAY,OACZC,QAAS,KAGrB,GAAC,CAAAtR,IAAA,iBAAAa,MAED,WAAiB,IAAA0Q,EACkB,QAA/BA,EAAA/N,IAAEjC,KAAK0P,gCAAwB,IAAAM,GAA/BA,EAAiCC,SACrC,GAAC,CAAAxR,IAAA,uBAAAa,MAED,WACI,MAAO,2KAKX,GAAC,CAAAb,IAAA,cAAAa,MAED,SAAYoO,GACR,IAAMwC,EAAQ,EACV9D,EAAAA,EAAAA,eAAc,aAAcsB,IAC5BtB,EAAAA,EAAAA,eAAc,YAAasB,IAC7ByC,OAAOC,SACT,OAAoB,GAAhBF,EAAM3N,OACC,KACgB,GAAhB2N,EAAM3N,OACN2N,EAAM,GAEV,GAAP7P,OAAU6P,EAAM,GAAE,KAAA7P,OAAI6P,EAAM,GAChC,I,uEAAC1Q,CAAA,CA7jBY,G,47DCTuB,IAElC6Q,EAAe,SAAAC,I,qRAAAC,CAAAF,EAAAC,GAAA,I,QAAAE,G,EAAAH,E,+YAEjB,SAAAA,EAAYI,EAAMC,GAAO,IAAAlQ,EAIH,O,4FAJGT,CAAA,KAAAsQ,IACrB7P,EAAAgQ,EAAArR,KAAA,KAAMuR,IACDD,KAAOA,EACZjQ,EAAKmQ,wBAAyB,EAC9BnQ,EAAKoQ,aAAapQ,CACtB,CA8dC,O,EA9dA6P,E,EAAA,EAAA5R,IAAA,aAAAa,MAGD,WACIuR,EAAAC,EAAAT,EAAApR,WAAA,mBAAAE,KAAA,MACAa,KAAKyC,YAAY,mBAAmB,GACpCzC,KAAKJ,QAAQmR,UAAU,mBAAoB/Q,KAAKgR,gBAAgBC,KAAKjR,MAAO,IAC5EiC,IAAEkF,SAASC,MAAM8J,GAAG,0BAA2BlR,KAAKmR,sBAAsBF,KAAKjR,OAC/EiC,IAAEkF,SAASC,MAAM8J,GAAG,wBAAD7Q,OAAyBL,KAAKN,IAAMM,KAAKoR,uBAAuBH,KAAKjR,OACxFiC,IAAEkF,SAASC,MAAM8J,GAAG,QAAS,2BAA4BlR,KAAKqR,cAAcJ,KAAKjR,OACjFiC,IAAEkF,SAASC,MAAM8J,GAAG,SAAU,iBAAkBlR,KAAKsR,iBAAiBL,KAAKjR,OAC3EiC,IAAEkF,SAASC,MAAM8J,GAAG,SAAU,oBAAqBlR,KAAKuR,qBAAqBN,KAAKjR,OAClFT,OAAOiS,iBAAiB,aAAcxR,KAAKyR,gBAAgBR,KAAKjR,OAChEA,KAAK0R,gBACT,GAAC,CAAAjT,IAAA,gBAAAa,MAED,WACI,MAAqB,eAAd8F,EAAAA,EAAAA,YAA6BpF,KAAKyQ,KAAK1I,eAClD,GAAC,CAAAtJ,IAAA,aAAAa,MAED,WACI,IAAM2F,EAAO4L,EAAAC,EAAAT,EAAApR,WAAA,mBAAAE,KAAA,MAIb,OAHIa,KAAK2R,gBAAgB,UAAY3R,KAAK4R,iBAAiB,QAAS,aAChE3M,EAAQI,KAAKjE,OAAOkE,QAAQ0C,OAEzB/C,CACX,GAAC,CAAAxG,IAAA,kBAAAa,MAED,WACIuR,EAAAC,EAAAT,EAAApR,WAAA,mBAAAE,KAAA,MACAa,KAAKmR,yBACDnR,KAAK6R,iBAEE7R,KAAK8R,sBADZ9R,KAAK+R,4BAIb,GAEA,CAAAtT,IAAA,wBAAAa,MAGA,WACI,GAAIU,KAAKgS,2BACAhS,KAAK8R,oBAGN9R,KAAKiS,oBAFLjS,KAAKkS,2BAIN,KAAAzC,EAAA0C,EACGC,EAAqD,QAAvC3C,EAAGxN,IAAE,0CAAkC,IAAAwN,OAAA,EAApCA,EAAsC4C,MACxDD,SAAAA,EAAgBE,WAAW,SAC5BtS,KAAKuS,0BAEO,QAAhBJ,EAAAnS,KAAKwS,mBAAW,IAAAL,GAAhBA,EAAkBM,MACtB,CACJ,GAAC,CAAAhU,IAAA,kBAAAa,MAED,SAAgByE,GACZ,IAAI2O,EAAQ3O,EAAE4O,OAAOD,MAAM,mBACvBA,GAEa,QADMA,EAAZ,KAEH1S,KAAKkS,uBACLU,QAAQC,UAAU,CAAC,EAAG,GAAItT,OAAO8P,SAASyD,SAAWvT,OAAO8P,SAAS0D,QAGjF,GAAC,CAAAtU,IAAA,gBAAAa,MAED,WAAgB,IAAA0T,EAAAC,EAAAC,EACRR,EAAc,QAATM,EAAGzT,cAAM,IAAAyT,GAAU,QAAVC,EAAND,EAAQ3D,gBAAQ,IAAA4D,GAAQ,QAARC,EAAhBD,EAAkBF,cAAM,IAAAG,OAAlB,EAANA,EAA0BR,MAAM,2BAC5C,OAAOA,aAAK,EAALA,EAAOnQ,QAAS,CAC3B,GAAC,CAAA9D,IAAA,iBAAAa,MAED,WACI,GAAIU,KAAK6R,gBACL,IAAI,IAAAsB,EAAAC,EAAAC,EAAArD,EAEUjR,GADQ,QAAToU,EAAG5T,cAAM,IAAA4T,GAAU,QAAVC,EAAND,EAAQ9D,gBAAQ,IAAA+D,GAAQ,QAARC,EAAhBD,EAAkBL,cAAM,IAAAM,OAAlB,EAANA,EAA0BX,MAAM,4BACrC,GACPY,EAA+CC,KAAKC,MAAMC,KAAKC,mBAAmB3U,KAA3D4U,GAAFL,EAAd5G,eAA4B4G,EAAZK,cAAcC,EAAMN,EAANM,OAErC,IADAhK,EAAAA,EAAAA,eAAc5J,KAAKM,gBAAiBqT,EAAc,MAC7C5I,EAAAA,EAAAA,SAAQ6I,GACT,IAAK,IAAInV,KAAOmV,GACZhK,EAAAA,EAAAA,eAAcnL,EAAKmV,EAAOnV,GAAM,IAKxC,GAFAuB,KAAKyC,YAAY,mBAAmB,GACpCzC,KAAKiS,oBACDjS,KAAK+H,iBAA0D,QAA3CiI,EAAI/N,IAAE,6CAAqC,IAAA+N,GAAvCA,EAAyCzN,OAAQ,CACzE,IAAMsR,IAAQC,EAAAA,EAAAA,SAAQ9T,KAAK+T,eAAe,WAAY/T,KAAK+T,eAAe,aAC1E9R,IAAE,sCAAsCjD,KAAK,UAAW6U,GAAMG,QAAQ,SAC1E,CAGJ,CAFE,MAAO1S,GACLC,QAAQC,IAAIF,EAChB,CAER,GAAC,CAAA7C,IAAA,cAAAa,MAED,SAAY6C,EAAMvC,GACd,GAAII,KAAKiU,OAAO,YAAa,CACzB,IAAMC,EAAQlL,EAAAA,EAAA,GAAOhJ,KAAKmU,qBAAmB,IAAExU,QAASK,KAAKoU,mBAC7D,OAAOpU,KAAKyQ,KAAK3I,YAAYoM,EACjC,CACI,OAAOlU,KAAKyQ,KAAK4D,WAAWrU,KAAKN,GAEzC,GAAC,CAAAjB,IAAA,yBAAAa,MAED,SAAuB6C,EAAMvC,GAA2B,IAAlB2M,EAASjK,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,KAI9C,OAHItC,KAAKiU,OAAO,cACZ1H,EAASvD,EAAAA,EAAA,GAAOhJ,KAAKmU,qBAAmB,IAAExU,QAASK,KAAKoU,oBAE5DvD,EAAAC,EAAAT,EAAApR,WAAA,+BAAAE,KAAA,KAAoCgD,EAAMvC,EAAS2M,EACvD,GAAC,CAAA9N,IAAA,eAAAa,MAED,WACIuR,EAAAC,EAAAT,EAAApR,WAAA,qBAAAE,KAAA,MACAa,KAAKmR,uBACT,GAAC,CAAA1S,IAAA,uBAAAa,MAED,WAAuB,IAAAgV,EACH,QAAhBA,EAAAtU,KAAKwS,mBAAW,IAAA8B,GAAhBA,EAAkBC,OAClBvU,KAAKwU,sBACT,GAAC,CAAA/V,IAAA,oBAAAa,MAED,WAAoB,IAAAmV,EACA,QAAhBA,EAAAzU,KAAKwS,mBAAW,IAAAiC,GAAhBA,EAAkBhC,OAClBzS,KAAKuS,yBACT,GAAC,CAAA9T,IAAA,0BAAAa,MAED,WAA0B,IAAAoV,EACI,QAA1BA,EAAA1U,KAAK2U,6BAAqB,IAAAD,GAA1BA,EAA4BE,YAAY,sBAC5C,GAAC,CAAAnW,IAAA,uBAAAa,MAED,WAAuB,IAAAuV,EACO,QAA1BA,EAAA7U,KAAK2U,6BAAqB,IAAAE,GAA1BA,EAA4BC,SAAS,sBACzC,GAAC,CAAArW,IAAA,sBAAAa,MAED,WACI,IAAI2E,EAAUhC,IAAE,gBAUhB,OATKgC,EAAQ1B,SACT0B,EAAUhC,IAAE,8CAEXgC,EAAQ1B,SACT0B,EAAUhC,IAAE,wCAEXgC,EAAQ1B,SACT0B,EAAUhC,IAAE,kDAETgC,CACX,GAAC,CAAAxF,IAAA,qBAAAa,MAED,WAAqB,IAAAoF,EACjB,OAAoB,QAAbA,EAAA1E,KAAKG,gBAAQ,IAAAuE,OAAA,EAAbA,EAAeqQ,kBAAmB,aAC7C,GAAC,CAAAtW,IAAA,wBAAAa,MAED,WACI,MAAoC,eAA7BU,KAAKgV,oBAChB,GAAC,CAAAvW,IAAA,qBAAAa,MAED,WAEI,OAAQU,KAAKgV,sBACT,IAAK,cACwB/S,IAAE,+BACHM,QACpBvC,KAAK2U,sBAAsBM,MAAM,kDAErC,MACJ,IAAK,iBACShT,IAAE,sBAAD5B,OAAuBL,KAAKN,KACvCuC,IAAE,sCAAsCiT,OAAO,kDAIvD,OAAO/N,SAASgO,cAAc,8BAClC,GAAC,CAAA1W,IAAA,2BAAAa,MAED,WAA2B,IAAA8V,EACvB,OAA2C,QAApCA,EAAAnT,IAAE,0CAAkC,IAAAmT,OAAA,EAApCA,EAAsC/C,SAAUrS,KAAKN,EAChE,GAAC,CAAAjB,IAAA,cAAAa,MAED,SAAYgC,GACR,MAAoB,uBAAhBA,aAAK,EAALA,EAAOG,OACA4T,EAAAA,EAAAA,oBAAmB/T,EAAMa,KAAKoN,SAAUvP,KAAKsV,UAAW,aAE5DD,EAAAA,EAAAA,oBAAmB/T,EAAOtB,KAAKsV,UAAW,WACrD,GAAC,CAAA7W,IAAA,oBAAAa,MAED,WAAoB,IAAAiW,EAChB,OAA2C,QAA3CA,EAAItT,IAAE,6CAAqC,IAAAsT,GAAvCA,EAAyChT,QACrCN,IAAE,sCAAsCuL,GAAG,YACpC,WAGR,SACX,GAAC,CAAA/O,IAAA,0BAAAa,MAED,SAAwB6C,EAAM4H,GAC1B/J,KAAKqK,uBAAuBN,GAC5B/J,KAAKwV,gBAAgBrT,EAAM4H,EAC/B,GAAC,CAAAtL,IAAA,kBAAAa,MAED,SAAgB6C,EAAM4H,GAAU,IAAAjJ,EAAA,KAC5Bd,KAAKiS,oBACLjS,KAAKyC,YAAY,mBAAmB,GAChCzC,KAAKyV,iBACLxT,IAAEkF,SAASC,MAAMsO,IAAI,oBAAoB,WACjCvT,EAAK0H,cAAgB/I,EAAKiH,gBAE1BjH,EAAKiR,6BAELjR,EAAK6U,mBAAmB5L,EAEhC,IACA9H,IAAE,mDAAmD+R,QAAQ,UACzDhU,KAAK4V,iCACL3T,IAAE,qDAAqD+R,QAAQ,UAEnE/R,IAAEkF,SAASC,MAAM4M,QAAQ,kBAAmB,CAAC6B,wBAAwB,KAErE7V,KAAK2V,mBAAmB5L,EAEhC,GAAC,CAAAtL,IAAA,qBAAAa,MAED,SAAmBiL,EAAOpI,GACtBnC,KAAKyV,gBAAkBzV,KAAK8V,yBAAyBvL,GACrDsG,EAAAC,EAAAT,EAAApR,WAAA,2BAAAE,KAAA,KAAyBoL,GACzBvK,KAAK+V,8BACL/V,KAAKwV,gBAAgBrT,EACzB,GAAC,CAAA1D,IAAA,2BAAAa,MAED,SAAyBiL,GACrB,SAAIvK,KAAK+H,iBAAoB/H,KAAKgW,4BAEzBjL,EAAAA,EAAAA,SAAQR,EAAMkB,oBACVqI,EAAAA,EAAAA,SACD,CACI3G,KAAM5C,EAAMkB,iBAAiB0B,KAC7BD,MAAO3C,EAAMkB,iBAAiByB,MAC9B+I,YAAa1L,EAAMkB,iBAAiBwK,YACpCC,aAAc3L,EAAMkB,iBAAiByK,cAEzC,CACI/I,MAAMf,EAAAA,EAAAA,eAAc,iBACpBc,OAAOd,EAAAA,EAAAA,eAAc,kBACrB6J,aAAa7J,EAAAA,EAAAA,eAAc,qBAC3B8J,cAAc9J,EAAAA,EAAAA,eAAc,sBAQhD,GAAC,CAAA3N,IAAA,yBAAAa,MAED,SAAuByK,GAAU,IAAAiE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA1L,EAAA,KAC7B,IAAK3C,KAAKmW,iCAAkCpL,EAAAA,EAAAA,SAAQhB,SAAe,QAAPiE,EAARjE,EAAUyE,aAAK,IAAAR,OAAP,EAARA,EAAiBpC,SAAU,CAC3E,IAAIA,GAAUT,EAAAA,EAAAA,4BAA2BpB,EAASyE,MAAM5C,UACpDK,EAAAA,EAAAA,gBAAeL,EAAS,CAAC,aAAc,iBAAkBkI,EAAAA,EAAAA,SAAQ9T,KAAK+T,eAAe,WAAYnI,IACjG5L,KAAKkL,6BAA6BU,EAE1C,CAiBA,GAhBI7B,SAAe,QAAPkE,EAARlE,EAAUyE,aAAK,IAAAP,GAAfA,EAAiBR,QACZpC,EAAAA,EAAAA,SAAQ,uBACTrL,KAAK6L,mBAAmB9B,EAASyE,MAAMf,KAAM,YAIjD1D,SAAe,QAAPmE,EAARnE,EAAUyE,aAAK,IAAAN,GAAfA,EAAiBO,iBAAkBpD,EAAAA,EAAAA,SAAQ,mBAC3CzB,EAAAA,EAAAA,eAAc,gBAAiBG,EAASyE,MAAMC,eAE9C1E,SAAe,QAAPoE,EAARpE,EAAUyE,aAAK,IAAAL,GAAO,QAAPC,EAAfD,EAAiB3C,aAAK,IAAA4C,GAAc,QAAdC,EAAtBD,EAAwBM,oBAAY,IAAAL,GAApCA,EAAsCM,mBACtC/E,EAAAA,EAAAA,eAAc,gBAAiBG,EAASyE,MAAMhD,MAAMkD,aAAaC,iBAC7D3O,KAAK+H,kBACL6B,EAAAA,EAAAA,eAAc,iBAAkBG,EAASyE,MAAMhD,MAAMkD,aAAaC,mBAIrE3O,KAAKmW,+BAAiCnW,KAAK+H,gBAAiB,KAAAuG,EAAAC,EAAAO,EAC7D,KAAK/D,EAAAA,EAAAA,SAAQhB,SAAwB,QAAhBuE,EAARvE,EAAU6E,sBAAc,IAAAN,GAAK,QAALC,EAAxBD,EAA2B,UAAE,IAAAC,GAAU,QAAVO,EAA7BP,EAA+BM,gBAAQ,IAAAC,OAA/B,EAARA,EAAyClD,SAAU,KAAAmD,EAAAqH,EACxDxK,GAAUT,EAAAA,EAAAA,4BAA2BpB,EAAS6E,eAAe,GAAGC,SAASjD,SACzE6B,EAAO,IACNqG,EAAAA,EAAAA,SAAQ9T,KAAKqW,YAAazK,KAC3B5L,KAAKyV,iBAAkB,EACvBzV,KAAKqW,YAAczK,EACnB5L,KAAKgM,8BAA8BJ,GACnC3J,IAAEkF,SAASC,MAAMsO,IAAI,oBAAoB,kBAAM/S,EAAKqJ,8BAA8BJ,EAAQ,KAEvD,QAAvCmD,EAAIhF,EAAS6E,eAAe,GAAGC,gBAAQ,IAAAE,GAAM,QAANqH,EAAnCrH,EAAqCtB,YAAI,IAAA2I,GAAzCA,EAA2CpH,YAC3CvB,GAAO3B,EAAAA,EAAAA,iBAAgB/B,EAAS6E,eAAe,GAAGC,SAASpB,KAAKuB,WAChEhP,KAAK6L,mBAAmB4B,EAAM,cAG7BxB,EAAAA,EAAAA,gBAAejM,KAAKkM,mBAAmB,WAAY,CAAC,QAAS,aAC1DuB,IAASpC,EAAAA,EAAAA,SAAQ,wBAA0BA,EAAAA,EAAAA,SAAQ,sBACnDrL,KAAK6L,mBAAmB4B,EAAM,WAElCzN,KAAKkL,6BAA6BU,GAE1C,CACA5L,KAAK+V,6BACT,CACJ,GAAC,CAAAtX,IAAA,8BAAAa,MAED,WAA8B,IAAAgX,EAE1B,GAA2C,QAA3CA,EAAIrU,IAAE,6CAAqC,IAAAqU,GAAvCA,EAAyC/T,OAAQ,CACjD,IAAMsR,IAAQC,EAAAA,EAAAA,SAAO9K,EAAAA,EAAC,CAAC,EAChBhJ,KAAK+T,eAAe,YAAU,IACjCtG,KAAMzN,KAAKuW,YAAY,aAAUvN,EAAAA,EAAA,GAC9BhJ,KAAK+T,eAAe,aAAW,IAAEtG,KAAMzN,KAAKuW,YAAY,eAC/DtU,IAAE,sCAAsCjD,KAAK,UAAW6U,GAAMG,QAAQ,SAC1E,CACJ,GAAC,CAAAvV,IAAA,UAAAa,MAED,WACI,OAAIU,KAAKiU,OAAO,YACLhS,IAAEjC,KAAKF,WAAW0W,QAAQ,iBAE1BvU,IAAEjC,KAAKF,WAAW0W,QAAQ,OAEzC,GAAC,CAAA/X,IAAA,gBAAAa,MAED,WACI,OAAI2C,IAAE,kBAAkBkO,OAAO,YAAY5N,QAChCN,IAAE,kBAAkBuL,GAAG,WAGtC,GAAC,CAAA/O,IAAA,yBAAAa,MAED,WACI,QAAKU,KAAKyW,kBACNzW,KAAK0B,YAAY,CAACD,KAAM,WACjB,EAGf,GAAC,CAAAhD,IAAA,iBAAAa,MAED,WACI,OAAO2C,IAAE,kBAAkBkO,OAAO,YAAY5N,OAAS,CAC3D,GAAC,CAAA9D,IAAA,mBAAAa,MAED,WACQU,KAAK0W,yBACDzU,IAAE,kBAAkBM,SACJN,IAAE,kBAAkBuL,GAAG,YAEnCxN,KAAK2W,gBAEL3W,KAAK4W,iBAIrB,GAAC,CAAAnY,IAAA,uBAAAa,MAED,WACQU,KAAK6W,kBACLC,WAAW9W,KAAKsR,iBAAiBL,KAAKjR,MAAO,IAErD,GAAC,CAAAvB,IAAA,SAAAa,MAED,SAAO0D,EAAQb,EAAMvC,GACjBiR,EAAAC,EAAAT,EAAApR,WAAA,eAAAE,KAAA,KAAa6D,EAAQb,EAAMvC,GACvBI,KAAK6W,kBACL7W,KAAKsR,kBAEb,GAAC,CAAA7S,IAAA,UAAAa,MAED,SAAQ6C,EAAMvC,GACNI,KAAK0W,0BAA4B1W,KAAKyW,iBACtCzW,KAAK0B,YAAY,CAACD,KAAM,SAEhC,GAAC,CAAAhD,IAAA,mBAAAa,MAED,SAAiB6C,EAAMvC,GAAS,IAAA+M,EACxBoK,EACJ,GAAI5U,SAA8B,QAA1BwK,EAAJxK,EAAM0K,gCAAwB,IAAAF,GAA9BA,EAAgCjN,GAAI,CACpCyC,EAAKyK,gBAAkBzK,EAAK0K,yBAAyBnN,GACrDqX,GAAiBC,EAAAA,EAAAA,uBAAsB7U,EAAK0K,yBAAyBnN,IACrE,IAAK,IAALuX,EAAA,EAAAC,EAAkBvY,OAAOyF,KAAK2S,GAAeE,EAAAC,EAAA3U,OAAA0U,IAAE,CAA1C,IAAIE,EAAKD,EAAAD,GACJxM,EAASsM,EAAeI,GACxBC,EAAKnV,IAAE,0BAAD5B,OAA2B8W,EAAK,eAAA9W,OAAcoK,EAAM,OAC5D2M,EAAG7U,QACH6U,EAAGpY,KAAK,WAAW,EAE3B,CACJ,CAaA,OAZImD,EAAKsJ,mBACLzL,KAAK2Q,yBAA0BmD,EAAAA,EAAAA,UAC3B3I,EAAAA,EAAAA,4BAA2BhJ,EAAKsJ,kBAAkB,GAClD,CACI0B,MAAMf,EAAAA,EAAAA,eAAc,iBACpBc,OAAOd,EAAAA,EAAAA,eAAc,kBACrBgB,UAAUhB,EAAAA,EAAAA,eAAc,qBACxBiB,SAASjB,EAAAA,EAAAA,eAAc,uBAInCpM,KAAKJ,QAAQyX,SAAS,8BAA+BlV,EAAMnC,MAC3D6Q,EAAAC,EAAAT,EAAApR,WAAA,yBAAAE,KAAA,KAA8BgD,EAAMvC,EAASI,KAAKmU,oBACtD,GAAC,CAAA1V,IAAA,gCAAAa,MAED,WAAgC,IAAAgY,EAC5B,QAA2C,QAA3CA,EAAIrV,IAAE,6CAAqC,IAAAqV,IAAvCA,EAAyC/U,SAClCN,IAAE,sCAAsCuL,GAAG,WAG1D,GAAC,CAAA/O,IAAA,6BAAAa,MAED,WACI2C,IAAE,6BAA6BwQ,OAC/BxQ,IAAE,4CAA4CsS,OAC9C,IAAMgD,EAAMtV,IAAE,kCAAkCuV,OAAOC,QAAQ,KAAMxV,IAAE,gBAAgBuV,QACvFvV,IAAE,kCAAkCuV,KAAKD,EAC7C,GAAC,CAAA9Y,IAAA,0BAAAa,MAED,WACI2C,IAAE,6BAA6BsS,OAC/BtS,IAAE,4CAA4CwQ,MAClD,GAEA,CAAAhU,IAAA,gBAAAa,MAGA,SAAcyE,GACVA,EAAE2T,iBACF1X,KAAKyC,YAAY,mBAAmB,GACpCzC,KAAK2X,0BACL3X,KAAKkS,sBACT,GAAC,CAAAzT,IAAA,wBAAAa,MAED,WACI,OAAOU,KAAKF,SAChB,GAAC,CAAArB,IAAA,uBAAAa,MAED,WACI,OAAO,IACX,GAAC,CAAAb,IAAA,oBAAAa,MAED,SAAkBiL,GAAO,IAAApG,EAAA,KAErB,OADAnE,KAAKkP,iBACE2B,EAAAC,EAAAT,EAAApR,WAAA,0BAAAE,KAAA,KAAwBoL,GAAO7J,MAAK,SAAAqJ,GAEvC,OADA5F,EAAKyT,iBACE7N,CACX,GACJ,GAAC,CAAAtL,IAAA,oBAAAa,MAED,WACI,OAAOU,KAAK6X,YAAY,mBAAmB,EAC/C,GAAC,CAAApZ,IAAA,oBAAAa,MAED,WACI,OAAO2C,IAAE,iBAAiB6V,iBAAiBC,QAAO,SAACC,EAAMC,GAAO,OAAAjP,EAAAA,EAAA,GACzDgP,GAAI,GAAAE,EAAA,GACND,EAAQxK,KAAOwK,EAAQ3Y,OAAK,GAC7B,CAAC,EACT,GAAC,CAAAb,IAAA,qBAAAa,MAED,SAAmB4K,GACXlK,KAAKyQ,KAAK0H,aAAa,wBAAwB,EAAMjO,EAAOlK,OAC5DA,KAAKsV,UAAU8C,QAEvB,GAAC,CAAA3Z,IAAA,iBAAAa,MAED,WACI,MAAO,UACX,GAAC,CAAAb,IAAA,0BAAAa,MAED,WACI,OAAOU,KAAKG,SAASkY,qBACzB,GAAC,CAAA5Z,IAAA,sBAAAa,MAED,WACI,OAAOU,KAAKG,SAASmY,yBACzB,GAAC,CAAA7Z,IAAA,8BAAAa,MAED,WACI,OAAOU,KAAKgW,4BAA8BhW,KAAK2Q,sBACnD,I,uEAACN,CAAA,CAregB,CDwkBrB,GEvlBA,MAAM,EAA+B9Q,OAAe,OAAQ,K,aCA5D,MAAM,EAA+BA,OAAe,OAAW,Q,g3CCoF/D,IA/EkC,SAAAgZ,I,qRAAAhI,CAAAiI,EAAAD,GAAA,I,QAAA/H,G,EAAAgI,E,+YAAA,SAAAA,IAAA,OAAAzY,EAAA,KAAAyY,GAAAhI,EAAAtJ,MAAA,KAAA5E,UAAA,CA4E7B,O,EA5E6BkW,E,EAAA,EAAA/Z,IAAA,kBAAAa,MAE9B,WACIE,EAAYP,UAAU2R,WAAW1J,MAAMlH,KAAMsC,WAC7CtC,KAAKmR,uBACT,GAAC,CAAA1S,IAAA,wBAAAa,MAED,WAEA,GAAC,CAAAb,IAAA,oBAAAa,MAED,WACIU,KAAKuS,0BACLvS,KAAK+R,6BACL,IAAMjS,EAAS+Q,EAAAC,EAAA0H,EAAAvZ,WAAA,2BAAAE,KAAA,MACXW,GACAmC,IAAEnC,GAAW2S,MAErB,GAAC,CAAAhU,IAAA,qBAAAa,MAED,WAAqB,IAAAoF,EACjB,GAAiB,QAAjBA,EAAI1E,KAAKG,gBAAQ,IAAAuE,GAAbA,EAAe+T,eAAgB,CAC/B,IAAM3Y,EAAYqH,SAASgO,cAAcnV,KAAKG,SAASsY,gBACvD,GAAI3Y,EACA,OAAOA,CAEf,CACA,OAAOqH,SAASuR,eAAe,yBACnC,GAAC,CAAAja,IAAA,SAAAa,MAED,SAAO0D,EAAQb,EAAMvC,GACjBI,KAAKyQ,KAAKuD,QAAQ,+BAClB/R,IAAE,6BAA6BsS,MACnC,GAAC,CAAA9V,IAAA,UAAAa,MAED,SAAQ6C,EAAMvC,GACVqC,IAAE,kBAAkBjD,KAAK,WAAW,GAAMgV,QAAQ,UAClD/R,IAAE,kCAAD5B,OAAmCL,KAAKN,GAAE,OAAMV,KAAK,WAAW,GAAMgV,QAAQ,QACnF,GAAC,CAAAvV,IAAA,aAAAa,MAED,WACI,IAAM2F,EAAU,GAahB,OAZIjF,KAAK2R,gBAAgB,WAAa3R,KAAK4R,iBAAiB,SAAU,qBAClE3M,EAAQI,KAAKjE,OAAOkE,QAAQC,QAE5BvF,KAAK2R,gBAAgB,aAAe3R,KAAK4R,iBAAiB,WAAY,qBACtE3M,EAAQI,KAAKjE,OAAOkE,QAAQI,UAE5B1F,KAAK2R,gBAAgB,UAAY3R,KAAK4R,iBAAiB,QAAS,qBAChE3M,EAAQI,KAAKjE,OAAOkE,QAAQ0C,OAE5BhI,KAAK2R,gBAAgB,SAAW3R,KAAK4R,iBAAiB,cAAe,qBACrE3M,EAAQI,KAAKjE,OAAOkE,QAAQM,MAEzBX,CACX,GAAC,CAAAxG,IAAA,eAAAa,MAED,WAAe,IAAAqZ,EACX9H,EAAAC,EAAA0H,EAAAvZ,WAAA,qBAAAE,KAAA,MACY,QAAZwZ,EAAA3Y,KAAKiE,eAAO,IAAA0U,GAAZA,EAAcpE,OACdvU,KAAK4Y,mBACT,GAAC,CAAAna,IAAA,oBAAAa,MAED,WACI,GAAIU,KAAKiE,QAAS,CACd,IAAM4U,EAAQla,OAAOyF,KAAKpE,KAAKC,SAASsC,OACxCvC,KAAKiE,QAAQ6Q,SAAS,gBAADzU,OAAiBwY,GAC1C,CACJ,GAAC,CAAApa,IAAA,iBAAAa,MAED,WACI,MAAO,SACX,GAAC,CAAAb,IAAA,2BAAAa,MAED,SAAyBiL,GACrB,OAAO,CACX,I,uEAACiO,CAAA,CA5E6B,CAASnI,GA+E3C,CAAiCI,IAAM,CAAC/Q,GAAI,OAAQE,QAAS,IAAIkZ,KAAWnZ,QAAS,c","sources":["webpack://wcPPCP_legacy-frontend/webpack/bootstrap","webpack://wcPPCP_legacy-frontend/webpack/runtime/compat get default export","webpack://wcPPCP_legacy-frontend/webpack/runtime/define property getters","webpack://wcPPCP_legacy-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://wcPPCP_legacy-frontend/webpack/runtime/make namespace object","webpack://wcPPCP_legacy-frontend/external window \"jQuery\"","webpack://wcPPCP_legacy-frontend/external window [\"wp\",\"apiFetch\"]","webpack://wcPPCP_legacy-frontend/external window [\"wp\",\"hooks\"]","webpack://wcPPCP_legacy-frontend/external window [\"wcPPCP\",\"utils\"]","webpack://wcPPCP_legacy-frontend/external window \"lodash\"","webpack://wcPPCP_legacy-frontend/./assets/js/legacy/classes/class-base-gateway.js","webpack://wcPPCP_legacy-frontend/./assets/js/legacy/classes/class-checkout-gateway.js","webpack://wcPPCP_legacy-frontend/external window [\"wcPPCP\",\"cart\"]","webpack://wcPPCP_legacy-frontend/external window [\"wcPPCP\",\"actions\"]","webpack://wcPPCP_legacy-frontend/./assets/js/legacy/ppcp/paypal-express-checkout.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"jQuery\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wcPPCP\"][\"utils\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"lodash\"];","import $ from 'jquery';\nimport apiFetch from \"@wordpress/api-fetch\";\nimport {defaultHooks} from \"@wordpress/hooks\";\nimport {\n    loadPayPalSdk,\n    getFieldValue,\n    isValidAddress,\n    extractShippingMethod,\n    getRestRoute,\n    getRestPath,\n    convertPayPalAddressToCart,\n    fieldsToJson,\n    extractFullName,\n    getSetting,\n    setFieldValue,\n    isValid,\n    isValidFieldValue,\n    getPayPalQueryParams,\n    getErrorMessage\n} from \"@ppcp/utils\";\nimport {isEmpty} from \"lodash\";\n\nclass BaseGateway {\n\n    constructor({id, context, actions, container = null}) {\n        this.id = id;\n        this.actions = actions;\n        this.buttons = {};\n        this.buttonActions = {};\n        this.context = context;\n        this.settings = getSetting(`${id}_data`);\n        this.container = container ? container : `li.payment_method_${id}`;\n        this.order_field_key = `${this.id}_paypal_order_id`;\n        this.billing_token_key = `${this.id}_billing_token`;\n    }\n\n    initialize() {\n        //load the paypal script\n        this.loadPayPalScript().then(() => {\n            // setup required events;\n            this.initializeEvents();\n            // render the button\n            this.createButton();\n        });\n    }\n\n    initializeEvents() {\n\n    }\n\n    isActive() {\n        return this.getData() !== null;\n    }\n\n    /**\n     * Loads the PayPal JS SDK\n     */\n    loadPayPalScript() {\n        return new Promise((resolve, reject) => {\n            loadPayPalSdk(this.getPayPalSDKArgs()).then(paypal => {\n                this.paypal = paypal;\n                resolve();\n            }).catch(error => {\n                console.log(error);\n                if (error?.code) {\n                    this.submitError(getErrorMessage(error));\n                }\n                reject();\n            })\n        })\n    }\n\n    /**\n     * Returns params used to laod the PayPal SDK\n     * @returns {{}}\n     */\n    getPayPalSDKArgs() {\n        return getPayPalQueryParams();\n    }\n\n    getClientId() {\n        let {clientId = null, environment} = getSetting('generalData');\n        if (!clientId && environment == 'sandbox') {\n            clientId = 'sb';\n        }\n        return clientId;\n    }\n\n    getData() {\n        let data = $(`${this.container}`).find('.wc-ppcp-payment-method-data').data('payment-method-data');\n        if (!data) {\n            return null;\n        }\n        return data;\n    }\n\n    setData(data) {\n        $(`${this.container}`).find('.wc-ppcp-payment-method-data').data('payment-method-data', data);\n    }\n\n    setOption(key, value) {\n        const data = this.getData();\n        if (data) {\n            data[key] = value;\n            this.setData(data);\n        }\n    }\n\n    setVariable(key, value) {\n        const data = getSetting(`${this.id}_data`);\n        data[key] = value;\n    }\n\n    getVariable(key, defaultValue = null) {\n        const data = getSetting(`${this.id}_data`);\n        if (data.hasOwnProperty(key)) {\n            return data[key];\n        }\n        if (defaultValue) {\n            this.setVariable(key, defaultValue);\n        }\n        return defaultValue;\n    }\n\n    /**\n     * Fetches an option from the payment method data object.\n     * @param key\n     * @param defaultValue\n     * @returns {null|*}\n     */\n    getOption(key, defaultValue = null) {\n        const data = this.getData();\n        if (data.hasOwnProperty(key)) {\n            return data[key];\n        } else {\n            if (defaultValue) {\n                this.setOption(key, defaultValue);\n            }\n        }\n        return defaultValue;\n    }\n\n    createButton() {\n        const container = this.getButtonContainer();\n        if (container && !$(container).find('.paypal-buttons').length) {\n            this.getSortedFunding(this.getFunding()).forEach(source => {\n                const button = this.paypal.Buttons(this.getButtonOptions(source));\n                this.buttons[source] = button;\n                if (button.isEligible()) {\n                    if (container instanceof NodeList) {\n                        for (const node of container) {\n                            button.render(node);\n                        }\n                    } else {\n                        button.render(container);\n                    }\n                }\n            });\n            this.$button = $(container);\n            defaultHooks.doAction('wcPPCPButtonCreated', this);\n        }\n    }\n\n    getButton() {\n        return this.$button;\n    }\n\n    destroyButtons() {\n        Object.keys(this.buttons).forEach(key => {\n            if (this.buttons[key]['close']) {\n                this.buttons[key].close();\n            }\n        })\n    }\n\n    disableButtons() {\n        Object.keys(this.buttonActions).forEach(key => {\n            this.buttonActions[key].disable();\n        });\n    }\n\n    enableButtons() {\n        Object.keys(this.buttonActions).forEach(key => {\n            this.buttonActions[key].enable();\n        });\n    }\n\n    getFunding() {\n        const funding = [];\n        const settings = this.settings?.funding || [];\n        if (this.settings?.paypal_sections?.includes(this.getPage())) {\n            funding.push(paypal.FUNDING.PAYPAL);\n        }\n        if (settings.includes('paylater') && this.settings?.paylater_sections?.includes(this.getPage())) {\n            if (this.isCheckoutFlow()) {\n                funding.push(paypal.FUNDING.PAYLATER);\n            }\n        }\n        if (settings.includes('card') && this.settings?.credit_card_sections?.includes(this.getPage())) {\n            funding.push(paypal.FUNDING.CARD);\n        }\n        return funding;\n    }\n\n    isFundingActive(type) {\n        return this.settings?.funding?.includes(type);\n    }\n\n    isSectionEnabled(type, section) {\n        const key = `${type}_sections`;\n        return this.settings?.[key]?.includes(section);\n    }\n\n    getSortedFunding(funding) {\n        const sortOrder = this.settings.buttons_order || [];\n        funding.sort((a, b) => {\n            const indexA = sortOrder.indexOf(a);\n            const indexB = sortOrder.indexOf(b);\n            return indexA < indexB ? -1 : 1;\n        });\n        return funding;\n    }\n\n    getButtonContainer() {\n        return null;\n    }\n\n    getButtonOptions(source) {\n        const options = {\n            fundingSource: source,\n            style: this.getButtonStyle(source),\n            onInit: (...args) => {\n                this.onInit(source, ...args);\n                $(document.body).triggerHandler('wc_ppcp_on_init', [this, source]);\n            },\n            onClick: (...args) => {\n                this.onClick(...args);\n                $(document.body).triggerHandler('wc_ppcp_on_click', [this, source]);\n            },\n            onApprove: (data, actions) => {\n                this.onApprove(data, actions);\n                $(document.body).triggerHandler('wc_ppcp_on_approve', [this, source]);\n            },\n            onCancel: (data) => {\n                this.orderId = data.orderID;\n                $(document.body).triggerHandler('wc_ppcp_on_cancel', [this, source, data]);\n            },\n            onError: (error) => {\n                if (this.currentError) {\n                    this.submitError(this.currentError);\n                    this.currentError = null;\n                } else {\n                    this.submitError(error);\n                }\n                $(document.body).triggerHandler('wc_ppcp_on_error', [this, source, error]);\n            },\n            onDestroy: () => {\n                $(document.body).triggerHandler('wc_ppcp_on_destroy', [this, source]);\n            }\n        };\n        if (this.isCheckoutFlow()) {\n            options.createOrder = (data, actions) => {\n                return this.createOrder(data, actions);\n            }\n            if (this.needsShipping() && source !== paypal.FUNDING.VENMO) {\n                options.onShippingChange = (...args) => {\n                    return this.onShippingChange(...args);\n                }\n            }\n        } else {\n            options.createBillingAgreement = (...args) => {\n                return this.createBillingAgreement(...args);\n            }\n        }\n        return options;\n    }\n\n    needsShipping() {\n        return this.getOption('needsShipping', false);\n    }\n\n    isCheckoutFlow() {\n        return getPayPalQueryParams()?.vault !== 'true';\n    }\n\n    getTotal() {\n        return this.getOption('total', 0);\n    }\n\n    getButtonStyle(source) {\n        let style = null;\n        switch (source) {\n            case paypal.FUNDING.PAYPAL:\n                style = this.settings?.buttons?.paypal;\n                break;\n            case paypal.FUNDING.PAYLATER:\n                style = this.settings?.buttons?.paylater;\n                break;\n            case paypal.FUNDING.CARD:\n                style = {...this.settings?.buttons?.card};\n                if (style.tagline) {\n                    delete style.tagline;\n                    style.layout = 'vertical';\n                } else {\n                    style.layout = 'horizontal';\n                }\n                break;\n            case paypal.FUNDING.VENMO:\n                const {color = '', label = '', ...venmoStyle} = this.settings?.buttons?.paypal;\n                style = venmoStyle;\n                break;\n        }\n        if (style?.height) {\n            style.height = parseInt(style.height);\n        }\n        return style;\n    }\n\n    onApprove(data, actions) {\n        setFieldValue(this.order_field_key, data.orderID, '');\n        if (data.billingToken) {\n            setFieldValue(this.billing_token_key, data.billingToken, '');\n            return this.fetchBillingToken(data.billingToken).then(response => {\n                this.handleBillingToken(response, data);\n            }).catch(error => {\n                return this.submitError(error?.message);\n            });\n        } else {\n            actions.order.get().then((res) => {\n                this.handleOnApproveResponse(data, res);\n            }).catch(error => this.submitError(error));\n        }\n    }\n\n    handleOnApproveResponse(data, response) {\n        this.populateCheckoutFields(response);\n        this.processCartCheckout();\n    }\n\n    fetchBillingToken(token) {\n        return apiFetch({\n            method: 'GET',\n            path: `/wc-ppcp/v1/billing-agreement/token/${token}`\n        });\n    }\n\n    handleBillingToken(token, data) {\n        if (!isEmpty(token.payer_info.billing_address)) {\n            this.populateBillingAddressFields(convertPayPalAddressToCart(token.payer_info.billing_address));\n        }\n        if (token?.payer_info?.first_name) {\n            if (!isValid('billing_first_name')) {\n                setFieldValue('first_name', token.payer_info.first_name, 'billing');\n            }\n        }\n        if (token?.payer_info?.last_name) {\n            if (!isValid('billing_last_name')) {\n                setFieldValue('last_name', token.payer_info.last_name, 'billing');\n            }\n        }\n        if (token?.payer_info?.email) {\n            if (!isValid('billing_email')) {\n                setFieldValue('billing_email', token.payer_info.email);\n            }\n        }\n        if (token?.payer_info?.phone) {\n            if (!isValid('billing_phone')) {\n                setFieldValue('billing_phone', token.payer_info.phone);\n            }\n        }\n        if (this.needsShipping() && token.shipping_address) {\n            if (!isEmpty(token.shipping_address)) {\n                let address = convertPayPalAddressToCart(token.shipping_address);\n                this.populateNameFields(extractFullName(token.shipping_address.recipient_name ?? ''), 'shipping');\n                this.populateShippingAddressFields(address);\n                if (!isValidAddress(this.getCartFullAddress('billing'), ['phone', 'email'])) {\n                    if (!isValidFieldValue(getFieldValue('billing_first_name')) && !isValidFieldValue(getFieldValue('billing_last_name'))) {\n                        this.populateNameFields(token.shipping_address.recipient_name ?? '', 'billing');\n                    }\n                    this.populateBillingAddressFields(address);\n                }\n            }\n        }\n    }\n\n    createOrder(data, actions) {\n        return actions.order.create(args);\n    }\n\n    createBillingAgreement(data, actions, extraData = null) {\n        return apiFetch({\n            method: 'POST',\n            url: getRestPath('/wc-ppcp/v1/billing-agreement/token'),\n            data: {\n                payment_method: this.id,\n                context: this.getPage(),\n                ...extraData\n            }\n        }).then(token => {\n            return token;\n        }).catch(error => {\n            this.currentError = error;\n        })\n    }\n\n    onShippingChange(data, actions, extraData = {}) {\n        const address = convertPayPalAddressToCart(data?.shipping_address || {}, true);\n        const shipping_method = data?.selected_shipping_option?.id || '';\n        return apiFetch({\n            method: 'POST',\n            url: getRestRoute('cart/shipping'),\n            data: {\n                order_id: data.orderID,\n                address,\n                shipping_method,\n                payment_method: this.id,\n                ...extraData\n            }\n        }).then(response => {\n            if (response.code) {\n                return actions.reject();\n            } else {\n                return actions.resolve();\n            }\n        }).catch(error => {\n            return actions.reject();\n        })\n    }\n\n    submitError(error) {\n\n    }\n\n    getShippingPrefix() {\n        return 'shipping';\n    }\n\n    getCartAddress(type) {\n        return {\n            address_1: getFieldValue('address_1', type),\n            address_2: getFieldValue('address_2', type),\n            state: getFieldValue('state', type),\n            city: getFieldValue('city', type),\n            postcode: getFieldValue('postcode', type),\n            country: getFieldValue('country', type)\n        }\n    }\n\n    getCartFullAddress(type) {\n        return {\n            first_name: getFieldValue('first_name', type),\n            last_name: getFieldValue('last_name', type),\n            address_1: getFieldValue('address_1', type),\n            address_2: getFieldValue('address_2', type),\n            state: getFieldValue('state', type),\n            city: getFieldValue('city', type),\n            postcode: getFieldValue('postcode', type),\n            country: getFieldValue('country', type)\n        }\n    }\n\n    onInit(source, data, actions) {\n        this.buttonActions[source] = actions;\n    }\n\n    onClick(data, actions) {\n\n    }\n\n    isPage(page) {\n        return this.getPage() === page;\n    }\n\n    getPage() {\n        let page = getSetting('generalData')?.page;\n        if (page == 'cart' && $(document.body).is('.woocommerce-checkout')) {\n            page = 'checkout';\n        }\n        return page;\n    }\n\n    populateShippingAddressFields(address) {\n        for (let key in address) {\n            setFieldValue(key, address[key], 'shipping');\n        }\n    }\n\n    populateBillingAddressFields(address) {\n        for (let key in address) {\n            setFieldValue(key, address[key], 'billing');\n        }\n    }\n\n    populateNameFields(name, prefix = '') {\n        let first_name, last_name;\n        if (Array.isArray(name)) {\n            [first_name, last_name] = name;\n        } else {\n            ({given_name: first_name, surname: last_name} = name);\n        }\n        setFieldValue('first_name', first_name, prefix);\n        setFieldValue('last_name', last_name, prefix);\n    }\n\n    populateCheckoutFields(response) {\n        if (!isEmpty(response?.payer?.address)) {\n            let address = convertPayPalAddressToCart(response.payer.address);\n            this.populateBillingAddressFields(address);\n        }\n        if (response?.payer?.name) {\n            this.populateNameFields(response.payer.name, 'billing');\n        }\n        if (response?.payer?.email_address) {\n            setFieldValue('billing_email', response.payer.email_address);\n        }\n        if (response?.payer?.phone?.phone_number?.national_number) {\n            setFieldValue('billing_phone', response.payer.phone.phone_number.national_number);\n            setFieldValue('shipping_phone', response.payer.phone.phone_number.national_number);\n        }\n        if (this.needsShipping() && response?.purchase_units?.[0]?.shipping) {\n            const address = convertPayPalAddressToCart(response.purchase_units[0].shipping.address)\n            this.populateShippingAddressFields(address);\n            if (response.purchase_units[0].shipping?.name?.full_name) {\n                const name = extractFullName(response.purchase_units[0].shipping.name.full_name);\n                this.populateNameFields(name, 'shipping');\n            }\n            // add billing address if possible\n            if (!isValidAddress(this.getCartFullAddress('billing'), ['phone', 'email'])) {\n                this.populateBillingAddressFields(address);\n            }\n        }\n    }\n\n    processCartCheckout() {\n        this.showProcessing();\n        return apiFetch({\n            method: 'POST',\n            url: getRestRoute('cart/checkout'),\n            data: this.getCartCheckoutData()\n        }).then(response => {\n            if (response.result && 'success' == response.result) {\n                window.location = response.redirect;\n            } else {\n                if (response.messages) {\n                    return this.submitError(response.messages);\n                }\n            }\n        }).catch(error => {\n            if (error.code) {\n                this.submitError(error.message);\n            }\n        });\n    }\n\n    getCartCheckoutData() {\n        return {payment_method: this.id, context: this.getPage(), ...fieldsToJson()};\n    }\n\n    getProcessingSelector() {\n        return 'body';\n    }\n\n    showProcessing() {\n        $(this.getProcessingSelector())?.block({\n            message: this.getProcessingMessage(),\n            overlayCSS: {\n                background: '#fff',\n                opacity: 0.6\n            }\n        });\n    }\n\n    hideProcessing() {\n        $(this.getProcessingSelector())?.unblock();\n    }\n\n    getProcessingMessage() {\n        return `<div class=\"wc-ppcp-loader\">\n                        <div></div>\n                        <div></div>\n                        <div></div>\n                      </div>`;\n    }\n\n    getFullName(prefix) {\n        const names = [\n            getFieldValue('first_name', prefix),\n            getFieldValue('last_name', prefix)\n        ].filter(Boolean);\n        if (names.length == 0) {\n            return null;\n        } else if (names.length == 1) {\n            return names[0];\n        }\n        return `${names[0]} ${names[1]}`\n    }\n}\n\nexport {BaseGateway};\nexport default BaseGateway;","import $ from 'jquery';\nimport BaseGateway from './class-base-gateway';\nimport {\n    getFieldValue,\n    submitErrorMessage,\n    setFieldValue,\n    convertPayPalAddressToCart,\n    extractFullName,\n    isValidAddress,\n    isValid,\n    extractShippingMethod,\n    getPage\n} from \"@ppcp/utils\";\nimport {isEmpty, isEqual} from 'lodash';\n\nclass CheckoutGateway extends BaseGateway {\n\n    constructor(cart, props) {\n        super(props);\n        this.cart = cart;\n        this.shippingAddressChanged = false;\n        this.initialize();\n    }\n\n\n    initialize() {\n        super.initialize();\n        this.setVariable('readyToCheckout', false);\n        this.actions.addAction('updated_checkout', this.updatedCheckout.bind(this), 20);\n        $(document.body).on('payment_method_selected', this.paymentMethodSelected.bind(this));\n        $(document.body).on(`checkout_place_order_${this.id}`, this.validateCheckoutFields.bind(this));\n        $(document.body).on('click', '.wc-ppcp-cancel__payment', this.cancelPayment.bind(this));\n        $(document.body).on('change', '[name=\"terms\"]', this.handleTermsClick.bind(this));\n        $(document.body).on('change', '[type=\"checkbox\"]', this.handleCheckboxChange.bind(this));\n        window.addEventListener('hashchange', this.handleHashError.bind(this));\n        this.handleOrderPay();\n    }\n\n    needsShipping() {\n        return getPage() !== 'order_pay' && this.cart.needsShipping();\n    }\n\n    getFunding() {\n        const funding = super.getFunding();\n        if (this.isFundingActive('venmo') && this.isSectionEnabled('venmo', 'checkout')) {\n            funding.push(paypal.FUNDING.VENMO);\n        }\n        return funding;\n    }\n\n    updatedCheckout() {\n        super.initialize();\n        this.paymentMethodSelected();\n        if (this.isOrderReview()) {\n            this.displayPaymentReadyMessage();\n        } else if (this.isReadyToCheckout()) {\n            this.displayPaymentReadyMessage();\n        }\n    }\n\n    /**\n     * Method that is called when a payment method is selected\n     */\n    paymentMethodSelected() {\n        if (this.isPaymentGatewaySelected()) {\n            if (!this.isReadyToCheckout()) {\n                this.displayPaymentButton();\n            } else {\n                this.hidePaymentButton();\n            }\n        } else {\n            const selectedMethod = $('[name=\"payment_method\"]:checked')?.val();\n            if (!selectedMethod?.startsWith('ppcp')) {\n                this.displayPlaceOrderButton();\n            }\n            this.getButton()?.hide();\n        }\n    }\n\n    handleHashError(e) {\n        var match = e.newURL.match(/ppcp_error=(.*)/);\n        if (match) {\n            const {1: error} = match;\n            if (error == 'true') {\n                this.displayPaymentButton();\n                history.pushState({}, '', window.location.pathname + window.location.search);\n            }\n        }\n    }\n\n    isOrderReview() {\n        let match = window?.location?.search?.match(/_ppcp_order_review=(.*)/);\n        return match?.length > 0;\n    }\n\n    handleOrderPay() {\n        if (this.isOrderReview()) {\n            try {\n                let match = window?.location?.search?.match(/_ppcp_order_review=(.*)/);\n                const {1: obj} = match;\n                const {payment_method, paypal_order, fields} = JSON.parse(atob(decodeURIComponent(obj)));\n                setFieldValue(this.order_field_key, paypal_order, '');\n                if (!isEmpty(fields)) {\n                    for (let key in fields) {\n                        setFieldValue(key, fields[key], '');\n                    }\n                }\n                this.setVariable('readyToCheckout', true);\n                this.hidePaymentButton();\n                if (this.needsShipping() && $('[name=\"ship_to_different_address\"]')?.length) {\n                    const bool = !isEqual(this.getCartAddress('billing'), this.getCartAddress('shipping'))\n                    $('[name=\"ship_to_different_address\"]').prop('checked', bool).trigger('change');\n                }\n            } catch (error) {\n                console.log(error);\n            }\n        }\n    }\n\n    createOrder(data, actions) {\n        if (this.isPage('checkout')) {\n            const formData = {...this.convertFormToData(), context: this.getPaymentType()};\n            return this.cart.createOrder(formData);\n        } else {\n            return this.cart.doOrderPay(this.id);\n        }\n    }\n\n    createBillingAgreement(data, actions, extraData = null) {\n        if (this.isPage('checkout')) {\n            extraData = {...this.convertFormToData(), context: this.getPaymentType()};\n        }\n        return super.createBillingAgreement(data, actions, extraData);\n    }\n\n    createButton() {\n        super.createButton();\n        this.paymentMethodSelected();\n    }\n\n    displayPaymentButton() {\n        this.getButton()?.show();\n        this.hidePlaceOrderButton();\n    }\n\n    hidePaymentButton() {\n        this.getButton()?.hide();\n        this.displayPlaceOrderButton();\n    }\n\n    displayPlaceOrderButton() {\n        this.getPlaceOrderButton()?.removeClass('wc-ppcp-hide-button');\n    }\n\n    hidePlaceOrderButton() {\n        this.getPlaceOrderButton()?.addClass('wc-ppcp-hide-button');\n    }\n\n    getPlaceOrderButton() {\n        let $button = $('#place_order');\n        if (!$button.length) {\n            $button = $('[name=\"woocommerce_checkout_place_order\"]');\n        }\n        if (!$button.length) {\n            $button = $('form.checkout button[type=\"submit\"]');\n        }\n        if (!$button.length) {\n            $button = $('form[id=\"order_review\"] button[type=\"submit\"]');\n        }\n        return $button;\n    }\n\n    getButtonPlacement() {\n        return this.settings?.buttonPlacement || 'place_order';\n    }\n\n    isPlaceOrderPlacement() {\n        return this.getButtonPlacement() == 'place_order';\n    }\n\n    getButtonContainer() {\n        let $parent = null;\n        switch (this.getButtonPlacement()) {\n            case 'place_order':\n                let $checkoutContainer = $('.wc-ppcp-checkout-container');\n                if (!$checkoutContainer.length) {\n                    this.getPlaceOrderButton().after('<div class=\"wc-ppcp-checkout-container\"></div>');\n                }\n                break;\n            case 'payment_method':\n                $parent = $(`div.payment_method_${this.id}`);\n                $('.wc-ppcp-payment-method__container').append('<div class=\"wc-ppcp-checkout-container\"></div>');\n                break;\n        }\n        // add container to parent;\n        return document.querySelector('.wc-ppcp-checkout-container');\n    }\n\n    isPaymentGatewaySelected() {\n        return $('[name=\"payment_method\"]:checked')?.val() === this.id;\n    }\n\n    submitError(error) {\n        if (error?.code === 'validation_errors') {\n            return submitErrorMessage(error.data.messages, this.getForm(), 'checkout');\n        }\n        return submitErrorMessage(error, this.getForm(), 'checkout');\n    }\n\n    getShippingPrefix() {\n        if ($('[name=\"ship_to_different_address\"]')?.length) {\n            if ($('[name=\"ship_to_different_address\"]').is(':checked')) {\n                return 'shipping';\n            }\n        }\n        return 'billing';\n    }\n\n    handleOnApproveResponse(data, response) {\n        this.populateCheckoutFields(response);\n        this.processCheckout(data, response);\n    }\n\n    processCheckout(data, response) {\n        this.hidePaymentButton();\n        this.setVariable('readyToCheckout', true);\n        if (this.update_required) {\n            $(document.body).one('updated_checkout', () => {\n                if (data.billingToken && this.needsShipping()) {\n                    // show message that they can click place order\n                    this.displayPaymentReadyMessage();\n                } else {\n                    this.submitCheckoutForm(response);\n                }\n            });\n            $('[name=\"billing_country\"],[name=\"billing_state\"]').trigger('change');\n            if (this.shipToDifferentAddressChecked()) {\n                $('[name=\"shipping_country\"],[name=\"shipping_state\"]').trigger('change');\n            }\n            $(document.body).trigger('update_checkout', {update_shipping_method: false});\n        } else {\n            this.submitCheckoutForm(response);\n        }\n    }\n\n    handleBillingToken(token, data) {\n        this.update_required = this.isCheckoutReviewRequired(token);\n        super.handleBillingToken(token);\n        this.maybeShipToDifferentAddress();\n        this.processCheckout(data);\n    }\n\n    isCheckoutReviewRequired(token) {\n        if (this.needsShipping() && !this.isPayPalAddressDisabled()) {\n            // if the address changed, then an update is required\n            if (!isEmpty(token.shipping_address)) {\n                if (!isEqual(\n                    {\n                        city: token.shipping_address.city,\n                        state: token.shipping_address.state,\n                        postal_code: token.shipping_address.postal_code,\n                        country_code: token.shipping_address.country_code\n                    },\n                    {\n                        city: getFieldValue('shipping_city'),\n                        state: getFieldValue('shipping_state'),\n                        postal_code: getFieldValue('shipping_postcode'),\n                        country_code: getFieldValue('shipping_country')\n                    }\n                )) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    populateCheckoutFields(response) {\n        if (!this.isAddressPopulationDisabled() && !isEmpty(response?.payer?.address)) {\n            let address = convertPayPalAddressToCart(response.payer.address);\n            if (isValidAddress(address, ['first_name', 'last_name']) && !isEqual(this.getCartAddress('billing'), address)) {\n                this.populateBillingAddressFields(address);\n            }\n        }\n        if (response?.payer?.name) {\n            if (!isValid('billing_first_name')) {\n                this.populateNameFields(response.payer.name, 'billing');\n            }\n        }\n        // only overwrite billing email if the field is blank\n        if (response?.payer?.email_address && !isValid('billing_email')) {\n            setFieldValue('billing_email', response.payer.email_address);\n        }\n        if (response?.payer?.phone?.phone_number?.national_number) {\n            setFieldValue('billing_phone', response.payer.phone.phone_number.national_number);\n            if (this.needsShipping()) {\n                setFieldValue('shipping_phone', response.payer.phone.phone_number.national_number);\n            }\n        }\n        // update the shipping address if one is included\n        if (!this.isAddressPopulationDisabled() && this.needsShipping()) {\n            if (!isEmpty(response?.purchase_units?.[0]?.shipping?.address)) {\n                let address = convertPayPalAddressToCart(response.purchase_units[0].shipping.address);\n                let name = '';\n                if (!isEqual(this.cartAddress, address)) {\n                    this.update_required = true;\n                    this.cartAddress = address;\n                    this.populateShippingAddressFields(address);\n                    $(document.body).one('updated_checkout', () => this.populateShippingAddressFields(address));\n                }\n                if (response.purchase_units[0].shipping?.name?.full_name) {\n                    name = extractFullName(response.purchase_units[0].shipping.name.full_name);\n                    this.populateNameFields(name, 'shipping');\n                }\n                // add billing address if possible\n                if (!isValidAddress(this.getCartFullAddress('billing'), ['phone', 'email'])) {\n                    if (name && !isValid('billing_first_name') && !isValid('billing_last_name')) {\n                        this.populateNameFields(name, 'billing');\n                    }\n                    this.populateBillingAddressFields(address);\n                }\n            }\n            this.maybeShipToDifferentAddress();\n        }\n    }\n\n    maybeShipToDifferentAddress() {\n        // compare billing and shipping address. If not equal, then select ship to different address\n        if ($('[name=\"ship_to_different_address\"]')?.length) {\n            const bool = !isEqual({\n                ...this.getCartAddress('billing'),\n                name: this.getFullName('billing')\n            }, {...this.getCartAddress('shipping'), name: this.getFullName('shipping')})\n            $('[name=\"ship_to_different_address\"]').prop('checked', bool).trigger('change');\n        }\n    }\n\n    getForm() {\n        if (this.isPage('checkout')) {\n            return $(this.container).closest('form.checkout');\n        } else {\n            return $(this.container).closest('form');\n        }\n    }\n\n    validateTerms() {\n        if ($('[name=\"terms\"]').filter(':visible').length) {\n            return $('[name=\"terms\"]').is(':checked');\n        }\n        return true;\n    }\n\n    validateCheckoutFields() {\n        if (!this.validateTerms()) {\n            this.submitError({code: 'terms'});\n            return false;\n        }\n        return true;\n    }\n\n    isTermsVisible() {\n        return $('[name=\"terms\"]').filter(':visible').length > 0;\n    }\n\n    handleTermsClick() {\n        if (this.isPlaceOrderPlacement()) {\n            if ($('[name=\"terms\"]').length) {\n                const checked = $('[name=\"terms\"]').is(':checked');\n                if (checked) {\n                    this.enableButtons();\n                } else {\n                    this.disableButtons();\n                }\n            }\n        }\n    }\n\n    handleCheckboxChange() {\n        if (this.isTermsVisible()) {\n            setTimeout(this.handleTermsClick.bind(this), 250);\n        }\n    }\n\n    onInit(source, data, actions) {\n        super.onInit(source, data, actions);\n        if (this.isTermsVisible()) {\n            this.handleTermsClick();\n        }\n    }\n\n    onClick(data, actions) {\n        if (this.isPlaceOrderPlacement() && !this.validateTerms()) {\n            this.submitError({code: 'terms'});\n        }\n    }\n\n    onShippingChange(data, actions) {\n        let shippingMethod;\n        if (data?.selected_shipping_option?.id) {\n            data.shipping_method = data.selected_shipping_option.id;\n            shippingMethod = extractShippingMethod(data.selected_shipping_option.id);\n            for (let index of Object.keys(shippingMethod)) {\n                const method = shippingMethod[index];\n                const el = $(`[name=\"shipping_method[${index}]\"][value=\"${method}\"]`);\n                if (el.length) {\n                    el.prop('checked', true);\n                }\n            }\n        }\n        if (data.shipping_address) {\n            this.shippingAddressChanged = !isEqual(\n                convertPayPalAddressToCart(data.shipping_address, true),\n                {\n                    city: getFieldValue('shipping_city'),\n                    state: getFieldValue('shipping_state'),\n                    postcode: getFieldValue('shipping_postcode'),\n                    country: getFieldValue('shipping_country')\n                }\n            );\n        }\n        this.actions.doAction('checkout_on_shipping_change', data, this);\n        return super.onShippingChange(data, actions, this.convertFormToData());\n    }\n\n    shipToDifferentAddressChecked() {\n        if ($('[name=\"ship_to_different_address\"]')?.length) {\n            return $('[name=\"ship_to_different_address\"]').is(':checked');\n        }\n        return false;\n    }\n\n    displayPaymentReadyMessage() {\n        $('.wc-ppcp-popup__container').hide();\n        $('.wc-ppcp-order-review-message__container').show();\n        const txt = $('.wc-ppcp-order-review__message').text().replace('%s', $('#place_order').text());\n        $('.wc-ppcp-order-review__message').text(txt);\n    }\n\n    hidePaymentReadyMessage() {\n        $('.wc-ppcp-popup__container').show();\n        $('.wc-ppcp-order-review-message__container').hide();\n    }\n\n    /**\n     * Cancels an existing payment method\n     */\n    cancelPayment(e) {\n        e.preventDefault();\n        this.setVariable('readyToCheckout', false);\n        this.hidePaymentReadyMessage();\n        this.displayPaymentButton();\n    }\n\n    getProcessingSelector() {\n        return this.container;\n    }\n\n    getProcessingMessage() {\n        return null;\n    }\n\n    fetchBillingToken(token) {\n        this.showProcessing();\n        return super.fetchBillingToken(token).then(response => {\n            this.hideProcessing();\n            return response;\n        });\n    }\n\n    isReadyToCheckout() {\n        return this.getVariable('readyToCheckout', false);\n    }\n\n    convertFormToData() {\n        return $('form.checkout').serializeArray().reduce((prev, current) => ({\n            ...prev,\n            [current.name]: current.value\n        }), {});\n    }\n\n    submitCheckoutForm(order) {\n        if (this.cart.applyFilters('checkout_submit_form', true, order, this)) {\n            this.getForm().submit();\n        }\n    }\n\n    getPaymentType() {\n        return 'checkout';\n    }\n\n    isPayPalAddressDisabled() {\n        return this.settings.paypalAddressDisabled;\n    }\n\n    isValidationEnabled() {\n        return this.settings.checkoutValidationEnabled;\n    }\n\n    isAddressPopulationDisabled() {\n        return this.isPayPalAddressDisabled() || !this.shippingAddressChanged;\n    }\n}\n\nexport {\n    CheckoutGateway\n}","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wcPPCP\"][\"cart\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wcPPCP\"][\"actions\"];","import {CheckoutGateway, BaseGateway} from '../classes';\nimport $ from 'jquery';\nimport cart from '@ppcp/cart';\nimport Actions from '@ppcp/actions';\n\nclass PayPalExpressCheckoutGateway extends CheckoutGateway {\n\n    updatedCheckout() {\n        BaseGateway.prototype.initialize.apply(this, arguments);\n        this.paymentMethodSelected();\n    }\n\n    paymentMethodSelected() {\n\n    }\n\n    hidePaymentButton() {\n        this.displayPlaceOrderButton();\n        this.displayPaymentReadyMessage();\n        const container = super.getButtonContainer();\n        if (container) {\n            $(container).hide();\n        }\n    }\n\n    getButtonContainer() {\n        if (this.settings?.expressElement) {\n            const container = document.querySelector(this.settings.expressElement);\n            if (container) {\n                return container;\n            }\n        }\n        return document.getElementById('wc-ppcp-express-button');\n    }\n\n    onInit(source, data, actions) {\n        this.cart.trigger('expressCheckoutButtonOnInit');\n        $('.wc-ppcp-express-checkout').show();\n    }\n\n    onClick(data, actions) {\n        $('[name=\"terms\"]').prop('checked', true).trigger('change');\n        $(`[name=\"payment_method\"][value=\"${this.id}\"]`).prop(\"checked\", true).trigger('click');\n    }\n\n    getFunding() {\n        const funding = [];\n        if (this.isFundingActive('paypal') && this.isSectionEnabled('paypal', 'express_checkout')) {\n            funding.push(paypal.FUNDING.PAYPAL);\n        }\n        if (this.isFundingActive('paylater') && this.isSectionEnabled('paylater', 'express_checkout')) {\n            funding.push(paypal.FUNDING.PAYLATER);\n        }\n        if (this.isFundingActive('venmo') && this.isSectionEnabled('venmo', 'express_checkout')) {\n            funding.push(paypal.FUNDING.VENMO);\n        }\n        if (this.isFundingActive('card') && this.isSectionEnabled('credit_card', 'express_checkout')) {\n            funding.push(paypal.FUNDING.CARD);\n        }\n        return funding;\n    }\n\n    createButton() {\n        super.createButton();\n        this.$button?.show();\n        this.addExpressClasses();\n    }\n\n    addExpressClasses() {\n        if (this.$button) {\n            const count = Object.keys(this.buttons).length;\n            this.$button.addClass(`button-count_${count}`);\n        }\n    }\n\n    getPaymentType() {\n        return 'express';\n    }\n\n    isCheckoutReviewRequired(token) {\n        return true;\n    }\n}\n\nnew PayPalExpressCheckoutGateway(cart, {id: 'ppcp', actions: new Actions(), context: 'checkout'});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","window","BaseGateway","_ref","id","context","actions","_ref$container","container","_classCallCheck","this","buttons","buttonActions","settings","getSetting","concat","order_field_key","billing_token_key","_this","loadPayPalScript","then","initializeEvents","createButton","getData","_this2","Promise","resolve","reject","loadPayPalSdk","getPayPalSDKArgs","paypal","catch","error","console","log","code","submitError","getErrorMessage","getPayPalQueryParams","_getSetting","_getSetting$clientId","clientId","environment","$","find","data","setData","defaultValue","arguments","length","undefined","setVariable","setOption","_this3","getButtonContainer","getSortedFunding","getFunding","forEach","source","button","Buttons","getButtonOptions","isEligible","NodeList","_step","_iterator","_createForOfIteratorHelper","s","n","done","node","render","err","e","f","$button","defaultHooks","_this4","keys","close","_this5","disable","_this6","enable","_this$settings","_this$settings2","_this$settings2$paypa","_this$settings3","_this$settings3$payla","_this$settings4","_this$settings4$credi","funding","paypal_sections","includes","getPage","push","FUNDING","PAYPAL","paylater_sections","isCheckoutFlow","PAYLATER","credit_card_sections","CARD","type","_this$settings5","_this$settings5$fundi","section","_this$settings6","_this$settings6$key","sortOrder","buttons_order","sort","b","indexOf","_this7","options","fundingSource","style","getButtonStyle","onInit","_len","args","Array","_key","apply","document","body","triggerHandler","onClick","onApprove","onCancel","orderId","orderID","onError","currentError","onDestroy","createOrder","needsShipping","VENMO","onShippingChange","createBillingAgreement","getOption","_getPayPalQueryParams","vault","_this$settings7","_this$settings7$butto","_this$settings8","_this$settings8$butto","_this$settings9","_this$settings9$butto","_this$settings10","_this$settings10$butt","_style","paylater","_objectSpread","card","tagline","layout","_this$settings$button","color","label","_objectWithoutProperties","_excluded","height","parseInt","_this8","setFieldValue","billingToken","fetchBillingToken","response","handleBillingToken","message","order","res","handleOnApproveResponse","populateCheckoutFields","processCartCheckout","token","apiFetch","method","path","_token$payer_info","_token$payer_info2","_token$payer_info3","_token$payer_info4","isEmpty","payer_info","billing_address","populateBillingAddressFields","convertPayPalAddressToCart","first_name","isValid","last_name","email","phone","shipping_address","_token$shipping_addre","_token$shipping_addre2","address","populateNameFields","extractFullName","recipient_name","populateShippingAddressFields","isValidAddress","getCartFullAddress","isValidFieldValue","getFieldValue","create","_this9","extraData","url","getRestPath","payment_method","_data$selected_shippi","shipping_method","selected_shipping_option","getRestRoute","order_id","address_1","address_2","state","city","postcode","country","page","_getSetting2","is","name","prefix","isArray","_name","_slicedToArray","given_name","surname","_response$payer","_response$payer2","_response$payer3","_response$payer4","_response$payer4$phon","_response$payer4$phon2","_response$purchase_un","_response$purchase_un2","payer","email_address","phone_number","national_number","purchase_units","shipping","_response$purchase_un3","_response$purchase_un4","full_name","_this10","showProcessing","getCartCheckoutData","result","location","redirect","messages","fieldsToJson","_$","getProcessingSelector","block","getProcessingMessage","overlayCSS","background","opacity","_$2","unblock","names","filter","Boolean","CheckoutGateway","_BaseGateway","_inherits","_super","cart","props","shippingAddressChanged","initialize","_get","_getPrototypeOf","addAction","updatedCheckout","bind","on","paymentMethodSelected","validateCheckoutFields","cancelPayment","handleTermsClick","handleCheckboxChange","addEventListener","handleHashError","handleOrderPay","isFundingActive","isSectionEnabled","isOrderReview","isReadyToCheckout","displayPaymentReadyMessage","isPaymentGatewaySelected","hidePaymentButton","displayPaymentButton","_this$getButton","selectedMethod","val","startsWith","displayPlaceOrderButton","getButton","hide","match","newURL","history","pushState","pathname","search","_window","_window$location","_window$location$sear","_window2","_window2$location","_window2$location$sea","_JSON$parse","JSON","parse","atob","decodeURIComponent","paypal_order","fields","bool","isEqual","getCartAddress","trigger","isPage","formData","convertFormToData","getPaymentType","doOrderPay","_this$getButton2","show","hidePlaceOrderButton","_this$getButton3","_this$getPlaceOrderBu","getPlaceOrderButton","removeClass","_this$getPlaceOrderBu2","addClass","buttonPlacement","getButtonPlacement","after","append","querySelector","_$3","submitErrorMessage","getForm","_$4","processCheckout","update_required","one","submitCheckoutForm","shipToDifferentAddressChecked","update_shipping_method","isCheckoutReviewRequired","maybeShipToDifferentAddress","isPayPalAddressDisabled","postal_code","country_code","isAddressPopulationDisabled","_response$purchase_un5","cartAddress","_$5","getFullName","closest","validateTerms","isPlaceOrderPlacement","enableButtons","disableButtons","isTermsVisible","setTimeout","shippingMethod","extractShippingMethod","_i","_Object$keys","index","el","doAction","_$6","txt","text","replace","preventDefault","hidePaymentReadyMessage","hideProcessing","getVariable","serializeArray","reduce","prev","current","_defineProperty","applyFilters","submit","paypalAddressDisabled","checkoutValidationEnabled","_CheckoutGateway","PayPalExpressCheckoutGateway","expressElement","getElementById","_this$$button","addExpressClasses","count","Actions"],"sourceRoot":""}